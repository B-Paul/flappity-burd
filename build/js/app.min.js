!function t(i,s,n){function e(c,h){if(!s[c]){if(!i[c]){var r="function"==typeof require&&require;if(!h&&r)return r(c,!0);if(o)return o(c,!0);var p=new Error("Cannot find module '"+c+"'");throw p.code="MODULE_NOT_FOUND",p}var a=s[c]={exports:{}};i[c][0].call(a.exports,function(t){var s=i[c][1][t];return e(s?s:t)},a,a.exports,t,i,s,n)}return s[c].exports}for(var o="function"==typeof require&&require,c=0;c<n.length;c++)e(n[c]);return e}({1:[function(t,i,s){"use strict";var n=t("../../helpers").clamp,e=function(t,i){this.entity=t,this.radius=i,this.size={x:i,y:i},this.type="circle"};e.prototype.collidesWith=function(t){return"circle"===t.components.collisions.type?this.collideCircle(t):"rect"===t.components.collisions.type?this.collideRect(t):!1},e.prototype.collideCircle=function(t){var i=this.entity.components.physics.position,s=t.components.physics.position,n=this.radius,e=t.components.collisions.radius,o={x:i.x-s.x,y:i.y-s.y},c=o.x*o.x+o.y*o.y,h=n+e;return h*h>c},e.prototype.collideRect=function(t){var i=this.entity.components.physics.position,s=t.components.physics.position,e=t.components.collisions.size,o={x:n(i.x,s.x-e.x/2,s.x+e.x/2),y:n(i.y,s.y-e.y/2,s.y+e.y/2)},c=this.radius,h={x:i.x-o.x,y:i.y-o.y},r=h.x*h.x+h.y*h.y;return c*c>r},i.exports=e},{"../../helpers":11}],2:[function(t,i,s){"use strict";var n=function(t,i){this.entity=t,this.size=i,this.type="rect"};n.prototype.collidesWith=function(t){return"circle"===t.components.collisions.type?this.collideCircle(t):"rect"===t.components.collisions.type?this.collideRect(t):!1},n.prototype.collideCircle=function(t){return t.components.collisions.collideRect(this.entity)},n.prototype.collideRect=function(t){var i=this.entity.components.physics.position,s=t.components.physics.position,n=this.size,e=t.components.collisions.size,o=i.x-n.x/2,c=i.x+n.x/2,h=i.y-n.y/2,r=i.y+n.y/2,p=s.x-e.x/2,a=s.x+e.x/2,l=s.y-e.y/2,u=s.y+e.y/2;return!(o>a||p>c||h>u||l>r)},i.exports=n},{}],3:[function(t,i,s){"use strict";var n=function(t){this.entity=t};n.prototype.draw=function(t){var i=this.entity.components.physics.position,s=this.entity.width,n=this.entity.height;t.save(),t.translate(i.x-s/2,0),t.fillStyle="brown",t.fillRect(0,0,s,n),t.restore()},i.exports=n},{}],4:[function(t,i,s){"use strict";var n=function(t){this.entity=t};n.prototype.draw=function(t){var i=this.entity.components.physics.position;t.save(),t.translate(i.x,i.y),t.beginPath(),t.arc(0,0,this.entity.radius,0,2*Math.PI),t.fill(),t.closePath(),t.restore()},i.exports=n},{}],5:[function(t,i,s){"use strict";var n=function(t){this.entity=t};n.prototype.draw=function(t){var i=this.entity.components.physics.position,s=this.entity.width,n=this.entity.height,e="T"===this.entity.attach;t.save(),t.translate(i.x-s/2,e?1-n:0),t.fillStyle="green",t.fillRect(0,0,s,n),t.restore()},i.exports=n},{}],6:[function(t,i,s){"use strict";var n=function(t){this.entity=t,this.position={x:0,y:0},this.velocity={x:0,y:0},this.acceleration={x:0,y:0}};n.prototype.update=function(t){this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t,this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t},i.exports=n},{}],7:[function(t,i,s){"use strict";var n=t("../components/graphics/altitude-limit"),e=t("../components/physics/physics"),o=t("../components/collisions/rectangle"),c=function(t,i){this.height=.02,this.width=t,this.components={graphics:new n(this),physics:new e(this),collisions:new o(this,{x:this.width,y:this.height})},this.components.physics.position.x=0,this.components.physics.position.y=this.height/2+i};i.exports=c},{"../components/collisions/rectangle":2,"../components/graphics/altitude-limit":3,"../components/physics/physics":6}],8:[function(t,i,s){"use strict";var n=t("../components/graphics/burd"),e=t("../components/physics/physics"),o=t("../components/collisions/circle"),c=function(){this.radius=.03,this.components={graphics:new n(this),collisions:new o(this,this.radius)},this.reset()};c.prototype.reset=function(){this.components.physics=new e,this.components.physics.position.y=.5,this.components.physics.acceleration.y=-1.5},i.exports=c},{"../components/collisions/circle":1,"../components/graphics/burd":4,"../components/physics/physics":6}],9:[function(t,i,s){"use strict";var n=t("../components/graphics/pipe"),e=t("../components/physics/physics"),o=t("../components/collisions/rectangle"),c=function(t,i,s,c){this.attach=s,this.height=i,this.width=.12,this.components={graphics:new n(this),physics:new e(this),collisions:new o(this,{x:this.width,y:this.height})},this.components.physics.update=function(){e.prototype.update.apply(this,arguments),c&&this.position.x<=0&&(c(),c=null)},this.components.physics.position.x=t+this.width/2,this.components.physics.position.y="T"===s?1-i/2:i/2,this.components.physics.velocity.x=-.25};i.exports=c},{"../components/collisions/rectangle":2,"../components/graphics/pipe":5,"../components/physics/physics":6}],10:[function(t,i,s){"use strict";var n=t("./systems/graphics"),e=t("./systems/physics"),o=t("./systems/input"),c=t("./systems/obstacles"),h=t("./systems/ui"),r=t("./entities/burd"),p=function(t){var i=this;this.burd=new r,this.entities=[this.burd],this.graphics=new n(this.entities,t),this.physics=new e(this.entities),this.input=new o(this.entities,t),this.obstacles=new c(this.entities,t),this.ui=new h,this.obstacles.onPassObstacle=function(){i.ui.bumpScore()},this.burd.components.collisions.onCollision=function(){i.physics.pause(),i.obstacles.pause(),i.input.started=!1,i.ui.reset()}};p.prototype.run=function(){var t=this;this.graphics.run(),this.input.run(),this.input.onStartGame=function(){return t.ui.isReady?(t.burd.reset(),t.obstacles.run(),t.physics.run(),!0):!1}},i.exports=p},{"./entities/burd":8,"./systems/graphics":14,"./systems/input":15,"./systems/obstacles":16,"./systems/physics":17,"./systems/ui":18}],11:[function(t,i,s){"use strict";var n=function(){function t(t,i){var s=[],n=!0,e=!1,o=void 0;try{for(var c,h=t[Symbol.iterator]();!(n=(c=h.next()).done)&&(s.push(c.value),!i||s.length!==i);n=!0);}catch(r){e=!0,o=r}finally{try{!n&&h["return"]&&h["return"]()}finally{if(e)throw o}}return s}return function(i,s){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return t(i,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e=s;e.clamp=function(t,i,s){return i>t?i:t>s?s:t},e.subtract=function(t,i){return t-i},e.scale=function(t,i,s){var o=i.sort(e.subtract),c=n(o,2),h=c[0],r=c[1],p=s.sort(e.subtract),a=n(p,2),l=a[0],u=a[1],y=r-h,f=u-l;return(t-h)/y*f+l}},{}],12:[function(t,i,s){"use strict";var n=t("./flappity-burd");document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("main-canvas"),i=new n(t);i.run()})},{"./flappity-burd":10}],13:[function(t,i,s){"use strict";var n=function(t){this.entities=t};n.prototype.tick=function(){for(var t=0;t<this.entities.length;t++){var i=this.entities[t];if("collisions"in i.components)for(var s=t+1;s<this.entities.length;s++){var n=this.entities[s];"collisions"in n.components&&i.components.collisions.collidesWith(n)&&(i.components.collisions.onCollision&&i.components.collisions.onCollision(n),n.components.collisions.onCollision&&n.components.collisions.onCollision(i))}}},i.exports=n},{}],14:[function(t,i,s){(function(t){"use strict";var s=function(t,i){this.entities=t,this.canvas=i,this.context=i.getContext("2d")};s.prototype.run=function(){var i=this.tick.bind(this);!function s(){t.requestAnimationFrame(function(t){i(t,s)})}()},s.prototype.tick=function(t,i){var s=this;(this.canvas.width!==this.canvas.offsetWith||this.canvas.height!==this.canvas.offsetHeight)&&(this.canvas.width=this.canvas.offsetWidth,this.canvas.height=this.canvas.offsetHeight),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.save(),this.context.translate(this.canvas.width/2,this.canvas.height),this.context.scale(this.canvas.height,-this.canvas.height),this.entities.forEach(function(t){t.components&&t.components.graphics&&t.components.graphics.draw(s.context)}),this.context.restore(),i&&i()},i.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(t,i,s){"use strict";var n=function(t,i){this.entities=t,this.canvas=i,this.started=!1};n.prototype.run=function(){this.canvas.addEventListener("mousedown",this.onClick.bind(this)),this.canvas.addEventListener("touchstart",this.onTouchStart.bind(this)),this.canvas.addEventListener("touchend",this.onTouchEnd.bind(this)),this.canvas.addEventListener("touchmove",this.onTouchMove.bind(this)),this.canvas.addEventListener("touchcancel",this.onTouchCancel.bind(this))},n.prototype.onClick=function(t){t.preventDefault(),!this.started&&this.onStartGame()&&(this.started=!0);var i=this.entities[0];i.components.physics.velocity.y=.55},n.prototype.onTouchStart=function(t){t.preventDefault(),this.touching||this.onClick(),this.touching=!0},n.prototype.onTouchEnd=function(t){t.preventDefault(),this.touching=!1},n.prototype.onTouchMove=function(t){t.preventDefault()},n.prototype.onTouchCancel=function(t){t.preventDefault(),this.touching=!1},i.exports=n},{}],16:[function(t,i,s){"use strict";var n=t("../entities/pipe"),e=t("../entities/altitude-limit"),o=t("../helpers").scale,c=function(t,i){this.entities=t,this.canvas=i,this.ground=new e(this.canvas.width,0),this.ceiling=new e(this.canvas.width,1),this.entities.push(this.ground,this.ceiling),this.intvl=null};c.prototype.run=function(){for(var t=this.entities.length-1;t>=0;t--)this.entities[t]instanceof n&&this.entities.splice(t,1);this.intvl=window.setInterval(this.tick.bind(this),2e3)},c.prototype.pause=function(){this.intvl&&window.clearInterval(this.intvl),this.intvl=null},c.prototype.tick=function(){var t=this,i=this.canvas.width/2/this.canvas.height,s=o(Math.random(),[0,1],[.2,.8]),e=.2,c=s-e/2,h=1-c-e,r=this.onPassObstacle.bind(this);this.ground.width=this.canvas.width,this.entities.push(new n(i,c,"T",r)),this.entities.push(new n(i,h,"B")),this.entities.forEach(function(s,n){s.components.physics.position.x<-i-s.width/2&&t.entities.splice(n,1)})},i.exports=c},{"../entities/altitude-limit":7,"../entities/pipe":9,"../helpers":11}],17:[function(t,i,s){"use strict";var n=t("./collisions"),e=function(t){this.entities=t,this.collisions=new n(t),this.intvl=null};e.prototype.run=function(){this.intvl=window.setInterval(this.tick.bind(this),1e3/60)},e.prototype.pause=function(){this.intvl&&window.clearInterval(this.intvl),this.intvl=null},e.prototype.tick=function(){this.entities.forEach(function(t){t.components&&t.components.physics&&t.components.physics.update(1/60)}),this.collisions.tick()},i.exports=e},{"./collisions":13}],18:[function(t,i,s){"use strict";var n=function(){var t=this;this.splash=document.getElementById("burd-splash"),this.score=document.getElementById("burd-score"),this.splash.onclick=function(){t.ready()},this.reset()};n.prototype.ready=function(){this.splash.style.display="none",this.score.style.display="block",this.isReady=!0},n.prototype.reset=function(){this.splash.style.display="block",this.score.style.display="none",this.score.textContent="0",this.isReady=!1},n.prototype.bumpScore=function(){this.score.textContent=(parseInt(this.score.textContent)+1).toString()},i.exports=n},{}]},{},[12]);
//# sourceMappingURL=app.min.js.map
