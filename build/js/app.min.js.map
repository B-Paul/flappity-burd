{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","site/js/components/collisions/circle.js","app.min.js","site/js/components/collisions/rectangle.js","site/js/components/graphics/altitude-limit.js","site/js/components/graphics/burd.js","site/js/components/graphics/pipe.js","site/js/components/physics/physics.js","site/js/components/sound/sound.js","site/js/entities/altitude-limit.js","site/js/entities/burd.js","site/js/entities/pipe.js","site/js/flappity-burd.js","site/js/helpers.js","site/js/main.js","site/js/systems/collisions.js","site/js/systems/graphics.js","site/js/systems/input.js","site/js/systems/obstacles.js","site/js/systems/physics.js","site/js/systems/ui.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","clamp","CircleCollisionComponent","entity","radius","this","size","x","y","type","prototype","collidesWith","components","collisions","collideCircle","collideRect","positionA","physics","position","positionB","radiusA","radiusB","diff","distanceSquared","radiusSum","sizeB","closest","../../helpers",2,"RectCollisionComponent","sizeA","leftA","rightA","bottomA","topA","leftB","rightB","bottomB","topB",3,"AltLimitGraphicsComponent","draw","context","width","height","scrollOffset","time","period","scrollBands","Math","ceil","save","translate","fillStyle","fillRect","restore",4,"BurdGraphicsComponent","_this","image","Image","src","iWidth","iHeight","addEventListener","naturalWidth","naturalHeight","rotate","velocity","scale","drawImage",5,"PipeGraphicsComponent","attachT","attach",6,"PhysicsComponent","acceleration","update","delta",7,"SoundComponent","sounds","reduce","fname","audio","Audio","load","playSound","play","flapSound","scoreSound","dieSound","resetSound",8,"Ground","yPosition","graphics","../components/collisions/rectangle","../components/graphics/altitude-limit","../components/physics/physics",9,"Burd","sound","reset","start","flap","die","../components/collisions/circle","../components/graphics/burd","../components/sound/sound",10,"Pipe","startX","passCb","bind","apply","arguments","../components/graphics/pipe",11,"GraphicsSystem","PhysicsSystem","InputSystem","ObstacleSystem","UISystem","FlappityBurd","canvas","burd","entities","input","obstacles","ui","onPassObstacle","bumpScore","onCollision","pause","started","onReady","run","_this2","onStartGame","isReady","./entities/burd","./systems/graphics","./systems/input","./systems/obstacles","./systems/physics","./systems/ui",12,"_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","err","Array","isArray","Object","TypeError","h","low","high","subtract","b","srcRange","dstRange","_srcRange$sort","sort","_srcRange$sort2","srcMin","srcMax","_dstRange$sort","_dstRange$sort2","dstMin","dstMax","srcSize","dstSize",13,"document","getElementById","app","./flappity-burd",14,"CollisionSystem","tick","entityA","j","entityB",15,"global","AltitudeLimit","getContext","recur","requestAnimationFrame","cb","offsetWith","offsetHeight","offsetWidth","forEach","ent","createLinearGradient","addColorStop","self","window","../entities/altitude-limit",16,"onClick","onTouchStart","onTouchEnd","onTouchMove","onTouchCancel","evt","preventDefault","touching",17,"ground","ceiling","intvl","splice","setInterval","clearInterval","aspectRatio","random","gap","height1","height2","pass","../entities/pipe","../helpers",18,"./collisions",19,"highScore","localStorage","getItem","endingSplashElt","finalScoreElt","highScoreElt","readyButton","readySplashElt","scoreElt","onclick","ready","style","display","score","textContent","max","setItem","toString"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nvar clamp = require('../../helpers').clamp;\n\nvar CircleCollisionComponent = function (entity, radius) {\n  this.entity = entity;\n  this.radius = radius;\n  this.size = {x: radius, y: radius};\n  this.type = 'circle';\n};\n\nCircleCollisionComponent.prototype.collidesWith = function (entity) {\n  if (entity.components.collisions.type === 'circle') {\n    return this.collideCircle(entity);\n  }\n  else if (entity.components.collisions.type === 'rect') {\n    return this.collideRect(entity);\n  }\n  return false;\n};\n\nCircleCollisionComponent.prototype.collideCircle = function (entity) {\n  var positionA = this.entity.components.physics.position,\n      positionB = entity.components.physics.position;\n\n  var radiusA = this.radius,\n      radiusB = entity.components.collisions.radius;\n\n  var diff = {x: positionA.x - positionB.x,\n              y: positionA.y - positionB.y};\n\n  var distanceSquared = diff.x * diff.x + diff.y * diff.y;\n  var radiusSum = radiusA + radiusB;\n\n  return distanceSquared < radiusSum * radiusSum;\n};\n\nCircleCollisionComponent.prototype.collideRect = function (entity) {\n  var positionA = this.entity.components.physics.position;\n  var positionB = entity.components.physics.position;\n  var sizeB = entity.components.collisions.size;\n\n  var closest = {\n    x: clamp(positionA.x, positionB.x - sizeB.x / 2,\n             positionB.x + sizeB.x / 2),\n    y: clamp(positionA.y, positionB.y - sizeB.y / 2,\n             positionB.y + sizeB.y / 2)\n  };\n\n\n  var radiusA = this.radius;\n\n  var diff = {x: positionA.x - closest.x,\n              y: positionA.y - closest.y};\n\n  var distanceSquared = diff.x * diff.x + diff.y * diff.y;\n  return distanceSquared < radiusA * radiusA;\n};\n\nmodule.exports = CircleCollisionComponent;\n","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar clamp = require('../../helpers').clamp;\n\nvar CircleCollisionComponent = function CircleCollisionComponent(entity, radius) {\n  this.entity = entity;\n  this.radius = radius;\n  this.size = { x: radius, y: radius };\n  this.type = 'circle';\n};\n\nCircleCollisionComponent.prototype.collidesWith = function (entity) {\n  if (entity.components.collisions.type === 'circle') {\n    return this.collideCircle(entity);\n  } else if (entity.components.collisions.type === 'rect') {\n    return this.collideRect(entity);\n  }\n  return false;\n};\n\nCircleCollisionComponent.prototype.collideCircle = function (entity) {\n  var positionA = this.entity.components.physics.position,\n      positionB = entity.components.physics.position;\n\n  var radiusA = this.radius,\n      radiusB = entity.components.collisions.radius;\n\n  var diff = { x: positionA.x - positionB.x,\n    y: positionA.y - positionB.y };\n\n  var distanceSquared = diff.x * diff.x + diff.y * diff.y;\n  var radiusSum = radiusA + radiusB;\n\n  return distanceSquared < radiusSum * radiusSum;\n};\n\nCircleCollisionComponent.prototype.collideRect = function (entity) {\n  var positionA = this.entity.components.physics.position;\n  var positionB = entity.components.physics.position;\n  var sizeB = entity.components.collisions.size;\n\n  var closest = {\n    x: clamp(positionA.x, positionB.x - sizeB.x / 2, positionB.x + sizeB.x / 2),\n    y: clamp(positionA.y, positionB.y - sizeB.y / 2, positionB.y + sizeB.y / 2)\n  };\n\n  var radiusA = this.radius;\n\n  var diff = { x: positionA.x - closest.x,\n    y: positionA.y - closest.y };\n\n  var distanceSquared = diff.x * diff.x + diff.y * diff.y;\n  return distanceSquared < radiusA * radiusA;\n};\n\nmodule.exports = CircleCollisionComponent;\n\n},{\"../../helpers\":12}],2:[function(require,module,exports){\n'use strict';\n\nvar RectCollisionComponent = function RectCollisionComponent(entity, size) {\n  this.entity = entity;\n  this.size = size;\n  this.type = 'rect';\n};\n\nRectCollisionComponent.prototype.collidesWith = function (entity) {\n  if (entity.components.collisions.type === 'circle') {\n    return this.collideCircle(entity);\n  } else if (entity.components.collisions.type === 'rect') {\n    return this.collideRect(entity);\n  }\n  return false;\n};\n\nRectCollisionComponent.prototype.collideCircle = function (entity) {\n  return entity.components.collisions.collideRect(this.entity);\n};\n\nRectCollisionComponent.prototype.collideRect = function (entity) {\n  var positionA = this.entity.components.physics.position,\n      positionB = entity.components.physics.position;\n\n  var sizeA = this.size,\n      sizeB = entity.components.collisions.size;\n\n  var leftA = positionA.x - sizeA.x / 2;\n  var rightA = positionA.x + sizeA.x / 2;\n  var bottomA = positionA.y - sizeA.y / 2;\n  var topA = positionA.y + sizeA.y / 2;\n\n  var leftB = positionB.x - sizeB.x / 2;\n  var rightB = positionB.x + sizeB.x / 2;\n  var bottomB = positionB.y - sizeB.y / 2;\n  var topB = positionB.y + sizeB.y / 2;\n\n  return !(leftA > rightB || leftB > rightA || bottomA > topB || bottomB > topA);\n};\n\nmodule.exports = RectCollisionComponent;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar AltLimitGraphicsComponent = function AltLimitGraphicsComponent(entity) {\n  this.entity = entity;\n};\n\nAltLimitGraphicsComponent.prototype.draw = function (context) {\n  var physics = this.entity.components.physics,\n      position = physics.position,\n      width = this.entity.width,\n      height = this.entity.height,\n      scrollOffset = physics.time / physics.period * 0.2,\n      scrollBands = Math.ceil(width / 0.2);\n\n  context.save();\n  context.translate(position.x - width / 2 - scrollOffset, position.y - height / 2);\n  context.fillStyle = '#7b725b';\n  context.fillRect(0, 0, width, height);\n  context.fillStyle = '#5d4427';\n  for (var i = 0; i < scrollBands; i++) {\n    context.translate(0.2, 0);\n    context.fillRect(0, 0, 0.1, height);\n  }\n  context.restore();\n};\n\nmodule.exports = AltLimitGraphicsComponent;\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nvar BurdGraphicsComponent = function BurdGraphicsComponent(entity) {\n  var _this = this;\n\n  this.entity = entity;\n  this.image = new Image();\n  this.image.src = 'images/trump.png';\n  this.iWidth = 0;\n  this.iHeight = 0;\n\n  this.image.addEventListener('load', function () {\n    _this.iWidth = _this.image.naturalWidth;\n    _this.iHeight = _this.image.naturalHeight;\n  });\n};\n\nBurdGraphicsComponent.prototype.draw = function (context) {\n  var position = this.entity.components.physics.position,\n      width = this.entity.radius * 2,\n      height = (this.iHeight / this.iWidth || 0) * width;\n\n  context.save();\n  context.translate(position.x, position.y);\n  context.rotate(-0.3 + this.entity.components.physics.velocity.y / 3);\n  context.translate(-this.entity.radius, height / 2);\n  context.scale(1, -1);\n  context.drawImage(this.image, 0, 0, width, height);\n  context.restore();\n};\n\nmodule.exports = BurdGraphicsComponent;\n\n},{}],5:[function(require,module,exports){\n'use strict';\n\nvar PipeGraphicsComponent = function PipeGraphicsComponent(entity) {\n  this.entity = entity;\n};\n\nPipeGraphicsComponent.prototype.draw = function (context) {\n  var position = this.entity.components.physics.position,\n      width = this.entity.width,\n      height = this.entity.height,\n      attachT = this.entity.attach === 'T';\n\n  context.save();\n  context.translate(position.x - width / 2, attachT ? 1 - height : 0);\n  context.fillStyle = attachT ? 'red' : 'blue';\n  context.fillRect(0, 0, width, height);\n  context.restore();\n};\n\nmodule.exports = PipeGraphicsComponent;\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nvar PhysicsComponent = function PhysicsComponent(entity) {\n  this.entity = entity;\n  this.time = 0;\n  // 2*3*5*7*11*13*17*19*23*29\n  this.period = 6469693230;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n  this.velocity = {\n    x: 0,\n    y: 0\n  };\n  this.acceleration = {\n    x: 0,\n    y: 0\n  };\n};\n\nPhysicsComponent.prototype.update = function (delta) {\n  this.time = (this.time + delta) % this.period;\n\n  this.velocity.x += this.acceleration.x * delta;\n  this.velocity.y += this.acceleration.y * delta;\n\n  this.position.x += this.velocity.x * delta;\n  this.position.y += this.velocity.y * delta;\n};\n\nmodule.exports = PhysicsComponent;\n\n},{}],7:[function(require,module,exports){\n'use strict';\n\nvar SoundComponent = function SoundComponent(entity) {\n  this.entity = entity;\n  this.sounds = ['flap.ogg', 'ching.wav', 'slap.wav', 'nothappen.mp3', 'runwin.mp3'].reduce(function (sounds, fname) {\n    var audio = new Audio('sounds/' + fname);\n    audio.load();\n    sounds[fname] = audio;\n    return sounds;\n  }, {});\n};\n\nSoundComponent.prototype.playSound = function (fname) {\n  var s = this.sounds[fname];\n  s.load();\n  s.play();\n};\n\nSoundComponent.prototype.flapSound = function () {\n  this.playSound('flap.ogg');\n};\n\nSoundComponent.prototype.scoreSound = function () {\n  this.playSound('ching.wav');\n};\n\nSoundComponent.prototype.dieSound = function () {\n  this.playSound('slap.wav');\n  this.playSound('nothappen.mp3');\n};\n\nSoundComponent.prototype.resetSound = function () {\n  this.playSound('runwin.mp3');\n};\n\nmodule.exports = SoundComponent;\n\n},{}],8:[function(require,module,exports){\n'use strict';\n\nvar AltLimitGraphicsComponent = require('../components/graphics/altitude-limit'),\n    PhysicsComponent = require('../components/physics/physics'),\n    RectCollisionComponent = require('../components/collisions/rectangle');\n\nvar Ground = function Ground(yPosition) {\n  this.height = 0.02;\n  this.width = 10;\n\n  this.components = {\n    graphics: new AltLimitGraphicsComponent(this),\n    physics: new PhysicsComponent(this),\n    collisions: new RectCollisionComponent(this, { x: this.width, y: this.height })\n  };\n\n  this.components.physics.period = 0.2 / 0.35;\n  this.components.physics.position.x = 0;\n  this.components.physics.position.y = this.height / 2 + yPosition;\n};\n\nmodule.exports = Ground;\n\n},{\"../components/collisions/rectangle\":2,\"../components/graphics/altitude-limit\":3,\"../components/physics/physics\":6}],9:[function(require,module,exports){\n'use strict';\n\nvar BurdGraphicsComponent = require('../components/graphics/burd'),\n    PhysicsComponent = require('../components/physics/physics'),\n    SoundComponent = require('../components/sound/sound'),\n    CircleCollisionComponent = require('../components/collisions/circle');\n\nvar Burd = function Burd() {\n  this.radius = 0.05;\n\n  this.components = {\n    graphics: new BurdGraphicsComponent(this),\n    sound: new SoundComponent(this),\n    collisions: new CircleCollisionComponent(this, this.radius)\n  };\n\n  this.reset();\n};\n\nBurd.prototype.reset = function () {\n  this.components.physics = new PhysicsComponent();\n  this.components.physics.position.y = 0.5;\n  this.components.sound.resetSound();\n};\n\nBurd.prototype.start = function () {\n  this.components.physics.acceleration.y = -1.75;\n};\n\nBurd.prototype.flap = function () {\n  this.components.physics.velocity.y = 0.55;\n  this.components.sound.flapSound();\n};\n\nBurd.prototype.die = function () {\n  this.components.physics.velocity.y = 0;\n  this.components.physics.acceleration.y = 0;\n  this.components.sound.dieSound();\n};\n\nmodule.exports = Burd;\n\n},{\"../components/collisions/circle\":1,\"../components/graphics/burd\":4,\"../components/physics/physics\":6,\"../components/sound/sound\":7}],10:[function(require,module,exports){\n'use strict';\n\nvar PipeGraphicsComponent = require('../components/graphics/pipe'),\n    PhysicsComponent = require('../components/physics/physics'),\n    SoundComponent = require('../components/sound/sound'),\n    RectCollisionComponent = require('../components/collisions/rectangle');\n\nvar Pipe = function Pipe(startX, height, attach, passCb) {\n  this.attach = attach;\n  this.height = height;\n  this.width = 0.15;\n\n  this.components = {\n    graphics: new PipeGraphicsComponent(this),\n    physics: new PhysicsComponent(this),\n    sound: new SoundComponent(this),\n    collisions: new RectCollisionComponent(this, { x: this.width, y: this.height })\n  };\n\n  // Really hacky. This augments the physics update to check the new position\n  // and trigger a callback when it first passes below 0 (i.e., the center of\n  // the play area). The cb in this instance ties back to a method of the\n  // ObstacleSystem object that created this pipe, which will be overridden by\n  // the main module to route through to the UISystem. Only the top pipe even\n  // gets this. YUCK. This begs for a refactor.\n  var sound = this.components.sound,\n      scoreSound = sound.scoreSound.bind(sound);\n  this.components.physics.update = function () {\n    PhysicsComponent.prototype.update.apply(this, arguments);\n    if (passCb && this.position.x <= 0) {\n      passCb();\n      passCb = null;\n      scoreSound();\n    }\n  };\n\n  this.components.physics.position.x = startX + this.width / 2;\n  this.components.physics.position.y = attach === 'T' ? 1 - height / 2 : height / 2;\n  this.components.physics.velocity.x = -0.35;\n};\n\nmodule.exports = Pipe;\n\n},{\"../components/collisions/rectangle\":2,\"../components/graphics/pipe\":5,\"../components/physics/physics\":6,\"../components/sound/sound\":7}],11:[function(require,module,exports){\n'use strict';\n\nvar GraphicsSystem = require('./systems/graphics'),\n    PhysicsSystem = require('./systems/physics'),\n    InputSystem = require('./systems/input'),\n    ObstacleSystem = require('./systems/obstacles'),\n    UISystem = require('./systems/ui'),\n    Burd = require('./entities/burd');\n\nvar FlappityBurd = function FlappityBurd(canvas) {\n  var _this = this;\n\n  this.burd = new Burd();\n  this.entities = [this.burd];\n\n  this.graphics = new GraphicsSystem(this.entities, canvas);\n  this.physics = new PhysicsSystem(this.entities);\n  this.input = new InputSystem(this.entities, canvas);\n  this.obstacles = new ObstacleSystem(this.entities, canvas);\n  this.ui = new UISystem();\n\n  this.obstacles.onPassObstacle = function () {\n    _this.ui.bumpScore();\n  };\n\n  this.burd.components.collisions.onCollision = function () {\n    _this.obstacles.pause();\n    _this.graphics.pause();\n    _this.physics.pause();\n    _this.input.started = false;\n    _this.ui.reset();\n    _this.burd.die();\n  };\n\n  this.ui.onReady = function () {\n    _this.burd.reset();\n    _this.obstacles.reset();\n    _this.graphics.run();\n    _this.physics.run();\n  };\n};\n\nFlappityBurd.prototype.run = function () {\n  var _this2 = this;\n\n  this.graphics.run();\n  this.input.run();\n  this.physics.run();\n  this.input.onStartGame = function () {\n    if (!_this2.ui.isReady) {\n      return false;\n    }\n    _this2.obstacles.run();\n    _this2.ui.start();\n    _this2.burd.start();\n    return true;\n  };\n};\n\nmodule.exports = FlappityBurd;\n\n},{\"./entities/burd\":9,\"./systems/graphics\":15,\"./systems/input\":16,\"./systems/obstacles\":17,\"./systems/physics\":18,\"./systems/ui\":19}],12:[function(require,module,exports){\n'use strict';\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; })();\n\nvar h = exports;\n\nh.clamp = function (value, low, high) {\n  if (value < low) {\n    return low;\n  }\n  if (value > high) {\n    return high;\n  }\n  return value;\n};\n\nh.subtract = function (a, b) {\n  return a - b;\n};\n\nh.scale = function (value, srcRange, dstRange) {\n  var _srcRange$sort = srcRange.sort(h.subtract);\n\n  var _srcRange$sort2 = _slicedToArray(_srcRange$sort, 2);\n\n  var srcMin = _srcRange$sort2[0];\n  var srcMax = _srcRange$sort2[1];\n\n  var _dstRange$sort = dstRange.sort(h.subtract);\n\n  var _dstRange$sort2 = _slicedToArray(_dstRange$sort, 2);\n\n  var dstMin = _dstRange$sort2[0];\n  var dstMax = _dstRange$sort2[1];\n  var srcSize = srcMax - srcMin;\n  var dstSize = dstMax - dstMin;\n\n  return (value - srcMin) / srcSize * dstSize + dstMin;\n};\n\n},{}],13:[function(require,module,exports){\n'use strict';\n\nvar FlappityBurd = require('./flappity-burd');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var canvas = document.getElementById('main-canvas'),\n      app = new FlappityBurd(canvas);\n  app.run();\n});\n\n},{\"./flappity-burd\":11}],14:[function(require,module,exports){\n'use strict';\n\nvar CollisionSystem = function CollisionSystem(entities) {\n  this.entities = entities;\n};\n\nCollisionSystem.prototype.tick = function () {\n  for (var i = 0; i < this.entities.length; i++) {\n    var entityA = this.entities[i];\n    if (!('collisions' in entityA.components)) {\n      continue;\n    }\n\n    for (var j = i + 1; j < this.entities.length; j++) {\n      var entityB = this.entities[j];\n      if (!('collisions' in entityB.components)) {\n        continue;\n      }\n\n      if (!entityA.components.collisions.collidesWith(entityB)) {\n        continue;\n      }\n\n      if (entityA.components.collisions.onCollision) {\n        entityA.components.collisions.onCollision(entityB);\n      }\n\n      if (entityB.components.collisions.onCollision) {\n        entityB.components.collisions.onCollision(entityA);\n      }\n    }\n  }\n};\n\nmodule.exports = CollisionSystem;\n\n},{}],15:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar AltitudeLimit = require('../entities/altitude-limit');\n\nvar GraphicsSystem = function GraphicsSystem(entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n  this.context = canvas.getContext('2d');\n};\n\nGraphicsSystem.prototype.run = function () {\n  var tick = GraphicsSystem.prototype.tick.bind(this);\n  (function recur() {\n    global.requestAnimationFrame(function (t) {\n      tick(t, recur);\n    });\n  })();\n};\n\nGraphicsSystem.prototype.pause = function () {\n  this.tick = function () {};\n};\n\nGraphicsSystem.prototype.tick = function (t, cb) {\n  var _this = this;\n\n  // Blank slate.\n  if (this.canvas.width !== this.canvas.offsetWith || this.canvas.height !== this.canvas.offsetHeight) {\n    this.canvas.width = this.canvas.offsetWidth;\n    this.canvas.height = this.canvas.offsetHeight;\n    this.entities.forEach(function (ent) {\n      if (ent instanceof AltitudeLimit) {\n        ent.width = _this.canvas.width / _this.canvas.height + 0.5;\n      }\n    });\n  }\n  this.context.fillStyle = this.context.createLinearGradient(0, 0, 0, this.canvas.height);\n  this.context.fillStyle.addColorStop(0.25, '#fdfcfc');\n  this.context.fillStyle.addColorStop(1, '#b1b1b1');\n  this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\n  this.context.save();\n  this.context.translate(this.canvas.width / 2, this.canvas.height);\n  this.context.scale(this.canvas.height, -this.canvas.height);\n\n  // Render.\n  this.entities.forEach(function (entity) {\n    if (!entity.components || !entity.components.graphics) {\n      return;\n    }\n    entity.components.graphics.draw(_this.context);\n  });\n\n  this.context.restore();\n\n  cb && cb();\n};\n\nmodule.exports = GraphicsSystem;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../entities/altitude-limit\":8}],16:[function(require,module,exports){\n'use strict';\n\nvar InputSystem = function InputSystem(entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n  this.started = false;\n};\n\nInputSystem.prototype.run = function () {\n  this.canvas.addEventListener('mousedown', this.onClick.bind(this));\n  this.canvas.addEventListener('touchstart', this.onTouchStart.bind(this));\n  this.canvas.addEventListener('touchend', this.onTouchEnd.bind(this));\n  this.canvas.addEventListener('touchmove', this.onTouchMove.bind(this));\n  this.canvas.addEventListener('touchcancel', this.onTouchCancel.bind(this));\n};\n\nInputSystem.prototype.onClick = function (evt) {\n  evt.preventDefault();\n  if (!this.started) {\n    if (!this.onStartGame()) {\n      return;\n    }\n    this.started = true;\n  }\n  var burd = this.entities[0];\n  burd.flap();\n};\n\nInputSystem.prototype.onTouchStart = function (evt) {\n  evt.preventDefault();\n  this.touching || this.onClick();\n  this.touching = true;\n};\n\nInputSystem.prototype.onTouchEnd = function (evt) {\n  evt.preventDefault();\n  this.touching = false;\n};\n\nInputSystem.prototype.onTouchMove = function (evt) {\n  evt.preventDefault();\n};\n\nInputSystem.prototype.onTouchCancel = function (evt) {\n  evt.preventDefault();\n  this.touching = false;\n};\n\nmodule.exports = InputSystem;\n\n},{}],17:[function(require,module,exports){\n'use strict';\n\nvar Pipe = require('../entities/pipe'),\n    AltitudeLimit = require('../entities/altitude-limit'),\n    scale = require('../helpers').scale;\n\nvar ObstacleSystem = function ObstacleSystem(entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n  this.ground = new AltitudeLimit(0);\n  this.ceiling = new AltitudeLimit(1.01);\n  this.entities.push(this.ground, this.ceiling);\n  this.intvl = null;\n};\n\nObstacleSystem.prototype.reset = function () {\n  for (var i = this.entities.length - 1; i >= 0; i--) {\n    if (this.entities[i] instanceof Pipe) {\n      this.entities.splice(i, 1);\n    }\n  }\n};\n\nObstacleSystem.prototype.run = function () {\n  // clear existing pipes\n  this.reset();\n  this.intvl = window.setInterval(this.tick.bind(this), 1000 * 2);\n};\n\nObstacleSystem.prototype.pause = function () {\n  this.intvl && window.clearInterval(this.intvl);\n  this.intvl = null;\n};\n\nObstacleSystem.prototype.tick = function () {\n  var _this = this;\n\n  var aspectRatio = this.canvas.width / 2 / this.canvas.height,\n      height = scale(Math.random(), [0, 1], [0.2, 0.8]),\n      gap = 0.25,\n      height1 = height - gap / 2,\n      height2 = 1 - height1 - gap,\n      pass = this.onPassObstacle.bind(this);\n\n  this.entities.push(new Pipe(aspectRatio, height1, 'T', pass));\n  this.entities.push(new Pipe(aspectRatio, height2, 'B'));\n  this.entities.forEach(function (ent, i) {\n    if (ent.components.physics.position.x < -aspectRatio - ent.width / 2) {\n      _this.entities.splice(i, 1);\n    }\n  });\n};\n\nObstacleSystem.prototype.onPassObstacle = function () {};\n\nmodule.exports = ObstacleSystem;\n\n},{\"../entities/altitude-limit\":8,\"../entities/pipe\":10,\"../helpers\":12}],18:[function(require,module,exports){\n'use strict';\n\nvar CollisionSystem = require('./collisions');\n\nvar PhysicsSystem = function PhysicsSystem(entities) {\n  this.entities = entities;\n  this.collisions = new CollisionSystem(entities);\n  this.intvl = null;\n};\n\nPhysicsSystem.prototype.run = function () {\n  this.intvl = window.setInterval(this.tick.bind(this), 1000 / 60);\n};\n\nPhysicsSystem.prototype.pause = function () {\n  this.intvl && window.clearInterval(this.intvl);\n  this.intvl = null;\n};\n\nPhysicsSystem.prototype.tick = function () {\n  this.entities.forEach(function (entity) {\n    if (!entity.components || !entity.components.physics) {\n      return;\n    }\n    entity.components.physics.update(1 / 60);\n  });\n  this.collisions.tick();\n};\n\nmodule.exports = PhysicsSystem;\n\n},{\"./collisions\":14}],19:[function(require,module,exports){\n'use strict';\n\nvar UISystem = function UISystem() {\n  this.highScore = localStorage.getItem('burd-high-score') || 0;\n  this.endingSplashElt = document.getElementById('burd-ending-splash');\n  this.finalScoreElt = document.getElementById('burd-final-score');\n  this.highScoreElt = document.getElementById('burd-high-score');\n  this.readyButton = document.getElementById('burd-ready-button');\n  this.readySplashElt = document.getElementById('burd-ready-splash');\n  this.scoreElt = document.getElementById('burd-score');\n  this.readyButton.onclick = this.ready.bind(this);\n  this.ready();\n};\n\nUISystem.prototype.ready = function () {\n  this.endingSplashElt.style.display = 'none';\n  this.scoreElt.style.display = 'inline-block';\n  this.readySplashElt.style.display = 'inline-block';\n\n  this.score = 0;\n  this.scoreElt.textContent = '0';\n  this.isReady = true;\n  this.onReady();\n};\n\nUISystem.prototype.onReady = function () {};\n\nUISystem.prototype.start = function () {\n  this.endingSplashElt.style.display = 'none';\n  this.scoreElt.style.display = 'inline-block';\n  this.readySplashElt.style.display = 'none';\n};\n\nUISystem.prototype.reset = function () {\n  this.highScore = Math.max(this.highScore, this.score);\n  localStorage.setItem('burd-high-score', this.highScore);\n\n  this.highScoreElt.textContent = this.highScore.toString();\n  this.finalScoreElt.textContent = this.score.toString();\n\n  this.endingSplashElt.style.display = 'inline-block';\n  this.scoreElt.style.display = 'none';\n  this.readySplashElt.style.display = 'none';\n  this.isReady = false;\n};\n\nUISystem.prototype.bumpScore = function () {\n  this.scoreElt.textContent = (++this.score).toString();\n};\n\nmodule.exports = UISystem;\n\n},{}]},{},[13])\n\n","'use strict';\n\nvar RectCollisionComponent = function (entity, size) {\n  this.entity = entity;\n  this.size = size;\n  this.type = 'rect';\n};\n\nRectCollisionComponent.prototype.collidesWith = function (entity) {\n  if (entity.components.collisions.type === 'circle') {\n    return this.collideCircle(entity);\n  }\n  else if (entity.components.collisions.type === 'rect') {\n    return this.collideRect(entity);\n  }\n  return false;\n};\n\nRectCollisionComponent.prototype.collideCircle = function (entity) {\n  return entity.components.collisions.collideRect(this.entity);\n};\n\nRectCollisionComponent.prototype.collideRect = function (entity) {\n  var positionA = this.entity.components.physics.position,\n      positionB = entity.components.physics.position;\n\n  var sizeA = this.size,\n      sizeB = entity.components.collisions.size;\n\n  var leftA = positionA.x - sizeA.x / 2;\n  var rightA = positionA.x + sizeA.x / 2;\n  var bottomA = positionA.y - sizeA.y / 2;\n  var topA = positionA.y + sizeA.y / 2;\n\n  var leftB = positionB.x - sizeB.x / 2;\n  var rightB = positionB.x + sizeB.x / 2;\n  var bottomB = positionB.y - sizeB.y / 2;\n  var topB = positionB.y + sizeB.y / 2;\n\n  return !(leftA > rightB || leftB > rightA ||\n           bottomA > topB || bottomB > topA);\n};\n\nmodule.exports = RectCollisionComponent;\n","'use strict';\n\nvar AltLimitGraphicsComponent = function (entity) {\n  this.entity = entity;\n};\n\nAltLimitGraphicsComponent.prototype.draw = function (context) {\n  var physics = this.entity.components.physics,\n      position = physics.position,\n      width = this.entity.width,\n      height = this.entity.height,\n      scrollOffset = physics.time / physics.period * 0.2,\n      scrollBands = Math.ceil(width / 0.2);\n\n  context.save();\n  context.translate(\n    position.x - (width / 2) - scrollOffset,\n    position.y - (height / 2));\n  context.fillStyle = '#7b725b';\n  context.fillRect(0, 0, width, height);\n  context.fillStyle = '#5d4427';\n  for (var i = 0; i < scrollBands; i++) {\n    context.translate(0.2, 0);\n    context.fillRect(0, 0, 0.1, height);\n  }\n  context.restore();\n};\n\nmodule.exports = AltLimitGraphicsComponent;\n","'use strict';\n\nvar BurdGraphicsComponent = function (entity) {\n  this.entity = entity;\n  this.image = new Image();\n  this.image.src = 'images/trump.png';\n  this.iWidth = 0;\n  this.iHeight = 0;\n\n  this.image.addEventListener('load', () => {\n    this.iWidth = this.image.naturalWidth;\n    this.iHeight = this.image.naturalHeight;\n  });\n};\n\nBurdGraphicsComponent.prototype.draw = function (context) {\n  var position = this.entity.components.physics.position,\n      width = this.entity.radius * 2,\n      height = (this.iHeight / this.iWidth || 0) * width;\n\n  context.save();\n  context.translate(position.x, position.y);\n  context.rotate(-0.3 + this.entity.components.physics.velocity.y / 3);\n  context.translate(-this.entity.radius, height / 2);\n  context.scale(1, -1);\n  context.drawImage(this.image, 0, 0, width, height);\n  context.restore();\n};\n\nmodule.exports = BurdGraphicsComponent;\n","'use strict';\n\nvar PipeGraphicsComponent = function (entity) {\n  this.entity = entity;\n};\n\nPipeGraphicsComponent.prototype.draw = function (context) {\n  var position = this.entity.components.physics.position,\n      width = this.entity.width,\n      height = this.entity.height,\n      attachT = this.entity.attach === 'T';\n\n  context.save();\n  context.translate(position.x - (width / 2), attachT ? 1 - height : 0);\n  context.fillStyle = attachT ? 'red' : 'blue';\n  context.fillRect(0, 0, width, height);\n  context.restore();\n};\n\nmodule.exports = PipeGraphicsComponent;\n","'use strict';\n\nvar PhysicsComponent = function (entity) {\n  this.entity = entity;\n  this.time = 0;\n  // 2*3*5*7*11*13*17*19*23*29\n  this.period = 6469693230;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n  this.velocity = {\n    x: 0,\n    y: 0\n  };\n  this.acceleration = {\n    x: 0,\n    y: 0\n  };\n};\n\nPhysicsComponent.prototype.update = function (delta) {\n  this.time = (this.time + delta) % this.period;\n\n  this.velocity.x += this.acceleration.x * delta;\n  this.velocity.y += this.acceleration.y * delta;\n\n  this.position.x += this.velocity.x * delta;\n  this.position.y += this.velocity.y * delta;\n};\n\nmodule.exports = PhysicsComponent;\n","'use strict';\n\nvar SoundComponent = function (entity) {\n  this.entity = entity;\n  this.sounds = [\n      'flap.ogg', 'ching.wav', 'slap.wav',\n      'nothappen.mp3', 'runwin.mp3' ]\n    .reduce((sounds, fname) => {\n      var audio = new Audio('sounds/' + fname);\n      audio.load();\n      sounds[fname] = audio;\n      return sounds;\n    }, {});\n};\n\nSoundComponent.prototype.playSound = function (fname) {\n  var s = this.sounds[fname];\n  s.load();\n  s.play();\n};\n\nSoundComponent.prototype.flapSound = function () {\n  this.playSound('flap.ogg');\n};\n\nSoundComponent.prototype.scoreSound = function () {\n  this.playSound('ching.wav');\n};\n\nSoundComponent.prototype.dieSound = function () {\n  this.playSound('slap.wav');\n  this.playSound('nothappen.mp3');\n};\n\nSoundComponent.prototype.resetSound = function () {\n  this.playSound('runwin.mp3');\n};\n\nmodule.exports = SoundComponent;\n","'use strict';\n\nvar AltLimitGraphicsComponent = require('../components/graphics/altitude-limit'),\n    PhysicsComponent = require('../components/physics/physics'),\n    RectCollisionComponent = require('../components/collisions/rectangle');\n\nvar Ground = function (yPosition) {\n  this.height = 0.02;\n  this.width = 10;\n\n  this.components = {\n    graphics: new AltLimitGraphicsComponent(this),\n    physics: new PhysicsComponent(this),\n    collisions: new RectCollisionComponent(this, {x: this.width, y: this.height})\n  };\n\n  this.components.physics.period = 0.2 / 0.35;\n  this.components.physics.position.x = 0;\n  this.components.physics.position.y = (this.height / 2) + yPosition;\n};\n\nmodule.exports = Ground;\n","'use strict';\n\nvar BurdGraphicsComponent = require('../components/graphics/burd'),\n    PhysicsComponent = require('../components/physics/physics'),\n    SoundComponent = require('../components/sound/sound'),\n    CircleCollisionComponent = require('../components/collisions/circle');\n\nvar Burd = function () {\n  this.radius = 0.05;\n\n  this.components = {\n    graphics: new BurdGraphicsComponent(this),\n    sound: new SoundComponent(this),\n    collisions: new CircleCollisionComponent(this, this.radius)\n  };\n\n  this.reset();\n};\n\nBurd.prototype.reset = function () {\n  this.components.physics = new PhysicsComponent();\n  this.components.physics.position.y = 0.5;\n  this.components.sound.resetSound();\n};\n\nBurd.prototype.start = function () {\n  this.components.physics.acceleration.y = -1.75;\n};\n\nBurd.prototype.flap = function () {\n  this.components.physics.velocity.y = 0.55;\n  this.components.sound.flapSound();\n};\n\nBurd.prototype.die = function () {\n  this.components.physics.velocity.y = 0;\n  this.components.physics.acceleration.y = 0;\n  this.components.sound.dieSound();\n};\n\nmodule.exports = Burd;\n","'use strict';\n\nvar PipeGraphicsComponent = require('../components/graphics/pipe'),\n    PhysicsComponent = require('../components/physics/physics'),\n    SoundComponent = require('../components/sound/sound'),\n    RectCollisionComponent = require('../components/collisions/rectangle');\n\nvar Pipe = function (startX, height, attach, passCb) {\n  this.attach = attach;\n  this.height = height;\n  this.width = 0.15;\n\n  this.components = {\n    graphics: new PipeGraphicsComponent(this),\n    physics: new PhysicsComponent(this),\n    sound: new SoundComponent(this),\n    collisions: new RectCollisionComponent(this, {x: this.width, y: this.height})\n  };\n\n  // Really hacky. This augments the physics update to check the new position\n  // and trigger a callback when it first passes below 0 (i.e., the center of\n  // the play area). The cb in this instance ties back to a method of the\n  // ObstacleSystem object that created this pipe, which will be overridden by\n  // the main module to route through to the UISystem. Only the top pipe even\n  // gets this. YUCK. This begs for a refactor.\n  var sound = this.components.sound,\n      scoreSound = sound.scoreSound.bind(sound);\n  this.components.physics.update = function () {\n    PhysicsComponent.prototype.update.apply(this, arguments);\n    if (passCb && this.position.x <= 0) {\n      passCb();\n      passCb = null;\n      scoreSound();\n    }\n  };\n\n  this.components.physics.position.x = startX + (this.width / 2);\n  this.components.physics.position.y = attach === 'T' ?\n    1 - (height / 2) :\n    height / 2;\n  this.components.physics.velocity.x = -0.35;\n};\n\nmodule.exports = Pipe;\n","'use strict';\n\nvar GraphicsSystem = require('./systems/graphics'),\n    PhysicsSystem = require('./systems/physics'),\n    InputSystem = require('./systems/input'),\n    ObstacleSystem = require('./systems/obstacles'),\n    UISystem = require('./systems/ui'),\n    Burd = require('./entities/burd');\n\nvar FlappityBurd = function(canvas) {\n  this.burd = new Burd();\n  this.entities = [this.burd];\n\n  this.graphics = new GraphicsSystem(this.entities, canvas);\n  this.physics = new PhysicsSystem(this.entities);\n  this.input = new InputSystem(this.entities, canvas);\n  this.obstacles = new ObstacleSystem(this.entities, canvas);\n  this.ui = new UISystem();\n\n  this.obstacles.onPassObstacle = () => {\n    this.ui.bumpScore();\n  };\n\n  this.burd.components.collisions.onCollision = () => {\n    this.obstacles.pause();\n    this.graphics.pause();\n    this.physics.pause();\n    this.input.started = false;\n    this.ui.reset();\n    this.burd.die();\n  };\n\n  this.ui.onReady = () => {\n    this.burd.reset();\n    this.obstacles.reset();\n    this.graphics.run();\n    this.physics.run();\n  };\n};\n\nFlappityBurd.prototype.run = function () {\n  this.graphics.run();\n  this.input.run();\n  this.physics.run();\n  this.input.onStartGame = () => {\n    if (!this.ui.isReady) { return false; }\n    this.obstacles.run();\n    this.ui.start();\n    this.burd.start();\n    return true;\n  };\n};\n\nmodule.exports = FlappityBurd;\n","'use strict';\n\nvar h = exports;\n\nh.clamp = function(value, low, high) {\n  if (value < low) {\n    return low;\n  }\n  if (value > high) {\n    return high;\n  }\n  return value;\n};\n\nh.subtract = function (a, b) { return a - b; };\n\nh.scale = function (value, srcRange, dstRange) {\n  var [srcMin, srcMax] = srcRange.sort(h.subtract),\n      [dstMin, dstMax] = dstRange.sort(h.subtract),\n      srcSize = srcMax - srcMin,\n      dstSize = dstMax - dstMin;\n\n  return ((value - srcMin) / srcSize * dstSize) + dstMin;\n};\n","'use strict';\n\nvar FlappityBurd = require('./flappity-burd');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var canvas = document.getElementById('main-canvas'),\n      app = new FlappityBurd(canvas);\n  app.run();\n});\n","'use strict';\n\nvar CollisionSystem = function(entities) {\n  this.entities = entities;\n};\n\nCollisionSystem.prototype.tick = function() {\n  for (var i = 0; i < this.entities.length; i++) {\n    var entityA = this.entities[i];\n    if (!('collisions' in entityA.components)) {\n      continue;\n    }\n\n    for (var j = i + 1; j < this.entities.length; j++) {\n      var entityB = this.entities[j];\n      if (!('collisions' in entityB.components)) {\n        continue;\n      }\n\n      if (!entityA.components.collisions.collidesWith(entityB)) {\n        continue;\n      }\n\n      if (entityA.components.collisions.onCollision) {\n        entityA.components.collisions.onCollision(entityB);\n      }\n\n      if (entityB.components.collisions.onCollision) {\n        entityB.components.collisions.onCollision(entityA);\n      }\n    }\n  }\n};\n\nmodule.exports = CollisionSystem;\n","'use strict';\n\nvar AltitudeLimit = require('../entities/altitude-limit');\n\nvar GraphicsSystem = function (entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n  this.context = canvas.getContext('2d');\n};\n\nGraphicsSystem.prototype.run = function () {\n  var tick = GraphicsSystem.prototype.tick.bind(this);\n  (function recur() {\n    global.requestAnimationFrame((t) => {\n      tick(t, recur);\n    });\n  })();\n};\n\nGraphicsSystem.prototype.pause = function () {\n  this.tick = function () {};\n};\n\nGraphicsSystem.prototype.tick = function (t, cb) {\n  // Blank slate.\n  if (this.canvas.width !== this.canvas.offsetWith ||\n      this.canvas.height !== this.canvas.offsetHeight) {\n    this.canvas.width = this.canvas.offsetWidth;\n    this.canvas.height = this.canvas.offsetHeight;\n    this.entities.forEach((ent) => {\n      if (ent instanceof AltitudeLimit) {\n        ent.width = (this.canvas.width / this.canvas.height) + 0.5;\n      }\n    });\n  }\n  this.context.fillStyle = this.context.createLinearGradient(\n    0, 0, 0, this.canvas.height);\n  this.context.fillStyle.addColorStop(0.25, '#fdfcfc');\n  this.context.fillStyle.addColorStop(1, '#b1b1b1');\n  this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\n  this.context.save();\n  this.context.translate(this.canvas.width / 2, this.canvas.height);\n  this.context.scale(this.canvas.height, -this.canvas.height);\n\n  // Render.\n  this.entities.forEach((entity) => {\n    if (!entity.components || !entity.components.graphics) { return; }\n    entity.components.graphics.draw(this.context);\n  });\n\n  this.context.restore();\n\n  cb && cb();\n};\n\nmodule.exports = GraphicsSystem;\n","'use strict';\n\nvar InputSystem = function (entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n  this.started = false;\n};\n\nInputSystem.prototype.run = function () {\n  this.canvas.addEventListener('mousedown', this.onClick.bind(this));\n  this.canvas.addEventListener('touchstart', this.onTouchStart.bind(this));\n  this.canvas.addEventListener('touchend', this.onTouchEnd.bind(this));\n  this.canvas.addEventListener('touchmove', this.onTouchMove.bind(this));\n  this.canvas.addEventListener('touchcancel', this.onTouchCancel.bind(this));\n};\n\nInputSystem.prototype.onClick = function (evt) {\n  evt.preventDefault();\n  if (!this.started) {\n    if (!this.onStartGame()) { return; }\n    this.started = true;\n  }\n  var burd = this.entities[0];\n  burd.flap();\n};\n\nInputSystem.prototype.onTouchStart = function (evt) {\n  evt.preventDefault();\n  this.touching || this.onClick();\n  this.touching = true;\n};\n\nInputSystem.prototype.onTouchEnd = function (evt) {\n  evt.preventDefault();\n  this.touching = false;\n};\n\nInputSystem.prototype.onTouchMove = function (evt) {\n  evt.preventDefault();\n};\n\nInputSystem.prototype.onTouchCancel = function (evt) {\n  evt.preventDefault();\n  this.touching = false;\n};\n\nmodule.exports = InputSystem;\n","'use strict';\n\nvar Pipe = require('../entities/pipe'),\n    AltitudeLimit = require('../entities/altitude-limit'),\n    scale = require('../helpers').scale;\n\nvar ObstacleSystem = function (entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n  this.ground = new AltitudeLimit(0);\n  this.ceiling = new AltitudeLimit(1.01);\n  this.entities.push(this.ground, this.ceiling);\n  this.intvl = null;\n};\n\nObstacleSystem.prototype.reset = function () {\n  for (var i = this.entities.length - 1; i >= 0; i--) {\n    if (this.entities[i] instanceof Pipe) { this.entities.splice(i, 1); }\n  }\n};\n\nObstacleSystem.prototype.run = function () {\n  // clear existing pipes\n  this.reset();\n  this.intvl = window.setInterval(this.tick.bind(this), 1000 * 2);\n};\n\nObstacleSystem.prototype.pause = function () {\n  this.intvl && window.clearInterval(this.intvl);\n  this.intvl = null;\n};\n\nObstacleSystem.prototype.tick = function () {\n  var aspectRatio = this.canvas.width / 2 / this.canvas.height,\n      height = scale(Math.random(), [0, 1], [0.2, 0.8]),\n      gap = 0.25,\n      height1 = height - gap / 2,\n      height2 = 1 - height1 - gap,\n\n      pass = this.onPassObstacle.bind(this);\n\n  this.entities.push(new Pipe(aspectRatio, height1, 'T', pass));\n  this.entities.push(new Pipe(aspectRatio, height2, 'B'));\n  this.entities.forEach((ent, i) => {\n    if (ent.components.physics.position.x < -aspectRatio - (ent.width / 2)) {\n      this.entities.splice(i, 1);\n    }\n  });\n};\n\nObstacleSystem.prototype.onPassObstacle = function () {};\n\nmodule.exports = ObstacleSystem;\n","'use strict';\n\nvar CollisionSystem = require('./collisions');\n\nvar PhysicsSystem = function (entities) {\n  this.entities = entities;\n  this.collisions = new CollisionSystem(entities);\n  this.intvl = null;\n};\n\nPhysicsSystem.prototype.run = function () {\n  this.intvl = window.setInterval(this.tick.bind(this), 1000 / 60);\n};\n\nPhysicsSystem.prototype.pause = function () {\n  this.intvl && window.clearInterval(this.intvl);\n  this.intvl = null;\n};\n\nPhysicsSystem.prototype.tick = function () {\n  this.entities.forEach((entity) => {\n    if (!entity.components || !entity.components.physics) { return; }\n    entity.components.physics.update(1/60);\n  });\n  this.collisions.tick();\n};\n\nmodule.exports = PhysicsSystem;\n","'use strict';\n\nvar UISystem = function () {\n  this.highScore = localStorage.getItem('burd-high-score') || 0;\n  this.endingSplashElt = document.getElementById('burd-ending-splash');\n  this.finalScoreElt = document.getElementById('burd-final-score');\n  this.highScoreElt = document.getElementById('burd-high-score');\n  this.readyButton = document.getElementById('burd-ready-button');\n  this.readySplashElt = document.getElementById('burd-ready-splash');\n  this.scoreElt = document.getElementById('burd-score');\n  this.readyButton.onclick = this.ready.bind(this);\n  this.ready();\n};\n\nUISystem.prototype.ready = function () {\n  this.endingSplashElt.style.display = 'none';\n  this.scoreElt.style.display = 'inline-block';\n  this.readySplashElt.style.display = 'inline-block';\n\n  this.score = 0;\n  this.scoreElt.textContent = '0';\n  this.isReady = true;\n  this.onReady();\n};\n\nUISystem.prototype.onReady = function () {};\n\nUISystem.prototype.start = function () {\n  this.endingSplashElt.style.display = 'none';\n  this.scoreElt.style.display = 'inline-block';\n  this.readySplashElt.style.display = 'none';\n};\n\nUISystem.prototype.reset = function () {\n  this.highScore = Math.max(this.highScore, this.score);\n  localStorage.setItem('burd-high-score', this.highScore);\n\n  this.highScoreElt.textContent = this.highScore.toString();\n  this.finalScoreElt.textContent = this.score.toString();\n\n  this.endingSplashElt.style.display = 'inline-block';\n  this.scoreElt.style.display = 'none';\n  this.readySplashElt.style.display = 'none';\n  this.isReady = false;\n};\n\nUISystem.prototype.bumpScore = function () {\n  this.scoreElt.textContent = (++this.score).toString();\n};\n\nmodule.exports = UISystem;\n"],"sourceRoot":"/source/"}