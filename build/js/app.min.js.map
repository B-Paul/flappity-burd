{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","site/js/components/collisions/circle.js","app.min.js","site/js/components/collisions/rectangle.js","site/js/components/graphics/altitude-limit.js","site/js/components/graphics/burd.js","site/js/components/graphics/pipe.js","site/js/components/physics/physics.js","site/js/entities/altitude-limit.js","site/js/entities/burd.js","site/js/entities/pipe.js","site/js/flappity-burd.js","site/js/helpers.js","site/js/main.js","site/js/systems/collisions.js","site/js/systems/graphics.js","site/js/systems/input.js","site/js/systems/obstacles.js","site/js/systems/physics.js","site/js/systems/ui.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","clamp","CircleCollisionComponent","entity","radius","this","size","x","y","type","prototype","collidesWith","components","collisions","collideCircle","collideRect","positionA","physics","position","positionB","radiusA","radiusB","diff","distanceSquared","radiusSum","sizeB","closest","../../helpers",2,"RectCollisionComponent","sizeA","leftA","rightA","bottomA","topA","leftB","rightB","bottomB","topB",3,"AltLimitGraphicsComponent","draw","context","width","height","save","translate","fillStyle","fillRect","restore",4,"BurdGraphicsComponent","beginPath","arc","Math","PI","fill","closePath",5,"PipeGraphicsComponent","attachT","attach",6,"PhysicsComponent","velocity","acceleration","update","delta",7,"Ground","yPosition","graphics","../components/collisions/rectangle","../components/graphics/altitude-limit","../components/physics/physics",8,"Burd","reset","../components/collisions/circle","../components/graphics/burd",9,"Pipe","startX","passCb","apply","arguments","../components/graphics/pipe",10,"GraphicsSystem","PhysicsSystem","InputSystem","ObstacleSystem","UISystem","FlappityBurd","canvas","_this","burd","entities","input","obstacles","ui","onPassObstacle","bumpScore","onCollision","pause","started","run","_this2","onStartGame","isReady","./entities/burd","./systems/graphics","./systems/input","./systems/obstacles","./systems/physics","./systems/ui",11,"_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","err","Array","isArray","Object","TypeError","h","low","high","subtract","b","scale","srcRange","dstRange","_srcRange$sort","sort","_srcRange$sort2","srcMin","srcMax","_dstRange$sort","_dstRange$sort2","dstMin","dstMax","srcSize","dstSize",12,"document","addEventListener","getElementById","app","./flappity-burd",13,"CollisionSystem","tick","entityA","j","entityB",14,"global","getContext","bind","recur","requestAnimationFrame","cb","offsetWith","offsetHeight","offsetWidth","clearRect","forEach","self","window",15,"onClick","onTouchStart","onTouchEnd","onTouchMove","onTouchCancel","evt","preventDefault","touching",16,"AltitudeLimit","ground","ceiling","intvl","splice","setInterval","clearInterval","aspectRatio","random","gap","height1","height2","pass","ent","../entities/altitude-limit","../entities/pipe","../helpers",17,"./collisions",18,"splash","score","onclick","ready","style","display","textContent","parseInt","toString"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nvar clamp = require('../../helpers').clamp;\n\nvar CircleCollisionComponent = function (entity, radius) {\n  this.entity = entity;\n  this.radius = radius;\n  this.size = {x: radius, y: radius};\n  this.type = 'circle';\n};\n\nCircleCollisionComponent.prototype.collidesWith = function (entity) {\n  if (entity.components.collisions.type === 'circle') {\n    return this.collideCircle(entity);\n  }\n  else if (entity.components.collisions.type === 'rect') {\n    return this.collideRect(entity);\n  }\n  return false;\n};\n\nCircleCollisionComponent.prototype.collideCircle = function (entity) {\n  var positionA = this.entity.components.physics.position,\n      positionB = entity.components.physics.position;\n\n  var radiusA = this.radius,\n      radiusB = entity.components.collisions.radius;\n\n  var diff = {x: positionA.x - positionB.x,\n              y: positionA.y - positionB.y};\n\n  var distanceSquared = diff.x * diff.x + diff.y * diff.y;\n  var radiusSum = radiusA + radiusB;\n\n  return distanceSquared < radiusSum * radiusSum;\n};\n\nCircleCollisionComponent.prototype.collideRect = function (entity) {\n  var positionA = this.entity.components.physics.position;\n  var positionB = entity.components.physics.position;\n  var sizeB = entity.components.collisions.size;\n\n  var closest = {\n    x: clamp(positionA.x, positionB.x - sizeB.x / 2,\n             positionB.x + sizeB.x / 2),\n    y: clamp(positionA.y, positionB.y - sizeB.y / 2,\n             positionB.y + sizeB.y / 2)\n  };\n\n\n  var radiusA = this.radius;\n\n  var diff = {x: positionA.x - closest.x,\n              y: positionA.y - closest.y};\n\n  var distanceSquared = diff.x * diff.x + diff.y * diff.y;\n  return distanceSquared < radiusA * radiusA;\n};\n\nmodule.exports = CircleCollisionComponent;\n","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar clamp = require('../../helpers').clamp;\n\nvar CircleCollisionComponent = function CircleCollisionComponent(entity, radius) {\n  this.entity = entity;\n  this.radius = radius;\n  this.size = { x: radius, y: radius };\n  this.type = 'circle';\n};\n\nCircleCollisionComponent.prototype.collidesWith = function (entity) {\n  if (entity.components.collisions.type === 'circle') {\n    return this.collideCircle(entity);\n  } else if (entity.components.collisions.type === 'rect') {\n    return this.collideRect(entity);\n  }\n  return false;\n};\n\nCircleCollisionComponent.prototype.collideCircle = function (entity) {\n  var positionA = this.entity.components.physics.position,\n      positionB = entity.components.physics.position;\n\n  var radiusA = this.radius,\n      radiusB = entity.components.collisions.radius;\n\n  var diff = { x: positionA.x - positionB.x,\n    y: positionA.y - positionB.y };\n\n  var distanceSquared = diff.x * diff.x + diff.y * diff.y;\n  var radiusSum = radiusA + radiusB;\n\n  return distanceSquared < radiusSum * radiusSum;\n};\n\nCircleCollisionComponent.prototype.collideRect = function (entity) {\n  var positionA = this.entity.components.physics.position;\n  var positionB = entity.components.physics.position;\n  var sizeB = entity.components.collisions.size;\n\n  var closest = {\n    x: clamp(positionA.x, positionB.x - sizeB.x / 2, positionB.x + sizeB.x / 2),\n    y: clamp(positionA.y, positionB.y - sizeB.y / 2, positionB.y + sizeB.y / 2)\n  };\n\n  var radiusA = this.radius;\n\n  var diff = { x: positionA.x - closest.x,\n    y: positionA.y - closest.y };\n\n  var distanceSquared = diff.x * diff.x + diff.y * diff.y;\n  return distanceSquared < radiusA * radiusA;\n};\n\nmodule.exports = CircleCollisionComponent;\n\n},{\"../../helpers\":11}],2:[function(require,module,exports){\n'use strict';\n\nvar RectCollisionComponent = function RectCollisionComponent(entity, size) {\n  this.entity = entity;\n  this.size = size;\n  this.type = 'rect';\n};\n\nRectCollisionComponent.prototype.collidesWith = function (entity) {\n  if (entity.components.collisions.type === 'circle') {\n    return this.collideCircle(entity);\n  } else if (entity.components.collisions.type === 'rect') {\n    return this.collideRect(entity);\n  }\n  return false;\n};\n\nRectCollisionComponent.prototype.collideCircle = function (entity) {\n  return entity.components.collisions.collideRect(this.entity);\n};\n\nRectCollisionComponent.prototype.collideRect = function (entity) {\n  var positionA = this.entity.components.physics.position,\n      positionB = entity.components.physics.position;\n\n  var sizeA = this.size,\n      sizeB = entity.components.collisions.size;\n\n  var leftA = positionA.x - sizeA.x / 2;\n  var rightA = positionA.x + sizeA.x / 2;\n  var bottomA = positionA.y - sizeA.y / 2;\n  var topA = positionA.y + sizeA.y / 2;\n\n  var leftB = positionB.x - sizeB.x / 2;\n  var rightB = positionB.x + sizeB.x / 2;\n  var bottomB = positionB.y - sizeB.y / 2;\n  var topB = positionB.y + sizeB.y / 2;\n\n  return !(leftA > rightB || leftB > rightA || bottomA > topB || bottomB > topA);\n};\n\nmodule.exports = RectCollisionComponent;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar AltLimitGraphicsComponent = function AltLimitGraphicsComponent(entity) {\n  this.entity = entity;\n};\n\nAltLimitGraphicsComponent.prototype.draw = function (context) {\n  var position = this.entity.components.physics.position,\n      width = this.entity.width,\n      height = this.entity.height;\n\n  context.save();\n  context.translate(position.x - width / 2, 0);\n  context.fillStyle = 'brown';\n  context.fillRect(0, 0, width, height);\n  context.restore();\n};\n\nmodule.exports = AltLimitGraphicsComponent;\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nvar BurdGraphicsComponent = function BurdGraphicsComponent(entity) {\n  this.entity = entity;\n};\n\nBurdGraphicsComponent.prototype.draw = function (context) {\n  var position = this.entity.components.physics.position;\n\n  context.save();\n  context.translate(position.x, position.y);\n  context.beginPath();\n  context.arc(0, 0, this.entity.radius, 0, 2 * Math.PI);\n  context.fill();\n  context.closePath();\n  context.restore();\n};\n\nmodule.exports = BurdGraphicsComponent;\n\n},{}],5:[function(require,module,exports){\n'use strict';\n\nvar PipeGraphicsComponent = function PipeGraphicsComponent(entity) {\n  this.entity = entity;\n};\n\nPipeGraphicsComponent.prototype.draw = function (context) {\n  var position = this.entity.components.physics.position,\n      width = this.entity.width,\n      height = this.entity.height,\n      attachT = this.entity.attach === 'T';\n\n  context.save();\n  context.translate(position.x - width / 2, attachT ? 1 - height : 0);\n  context.fillStyle = 'green';\n  context.fillRect(0, 0, width, height);\n  context.restore();\n};\n\nmodule.exports = PipeGraphicsComponent;\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nvar PhysicsComponent = function PhysicsComponent(entity) {\n  this.entity = entity;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n  this.velocity = {\n    x: 0,\n    y: 0\n  };\n  this.acceleration = {\n    x: 0,\n    y: 0\n  };\n};\n\nPhysicsComponent.prototype.update = function (delta) {\n  this.velocity.x += this.acceleration.x * delta;\n  this.velocity.y += this.acceleration.y * delta;\n\n  this.position.x += this.velocity.x * delta;\n  this.position.y += this.velocity.y * delta;\n};\n\nmodule.exports = PhysicsComponent;\n\n},{}],7:[function(require,module,exports){\n'use strict';\n\nvar AltLimitGraphicsComponent = require('../components/graphics/altitude-limit'),\n    PhysicsComponent = require('../components/physics/physics'),\n    RectCollisionComponent = require('../components/collisions/rectangle');\n\nvar Ground = function Ground(width, yPosition) {\n  this.height = 0.02;\n  this.width = width;\n\n  this.components = {\n    graphics: new AltLimitGraphicsComponent(this),\n    physics: new PhysicsComponent(this),\n    collisions: new RectCollisionComponent(this, { x: this.width, y: this.height })\n  };\n\n  this.components.physics.position.x = 0;\n  this.components.physics.position.y = this.height / 2 + yPosition;\n};\n\nmodule.exports = Ground;\n\n},{\"../components/collisions/rectangle\":2,\"../components/graphics/altitude-limit\":3,\"../components/physics/physics\":6}],8:[function(require,module,exports){\n'use strict';\n\nvar BurdGraphicsComponent = require('../components/graphics/burd'),\n    PhysicsComponent = require('../components/physics/physics'),\n    CircleCollisionComponent = require('../components/collisions/circle');\n\nvar Burd = function Burd() {\n  this.radius = 0.03;\n\n  this.components = {\n    graphics: new BurdGraphicsComponent(this),\n    collisions: new CircleCollisionComponent(this, this.radius)\n  };\n\n  this.reset();\n};\n\nBurd.prototype.reset = function () {\n  this.components.physics = new PhysicsComponent();\n  this.components.physics.position.y = 0.5;\n  this.components.physics.acceleration.y = -1.5;\n};\n\nmodule.exports = Burd;\n\n},{\"../components/collisions/circle\":1,\"../components/graphics/burd\":4,\"../components/physics/physics\":6}],9:[function(require,module,exports){\n'use strict';\n\nvar PipeGraphicsComponent = require('../components/graphics/pipe'),\n    PhysicsComponent = require('../components/physics/physics'),\n    RectCollisionComponent = require('../components/collisions/rectangle');\n\nvar Pipe = function Pipe(startX, height, attach, passCb) {\n  this.attach = attach;\n  this.height = height;\n  this.width = 0.12;\n\n  this.components = {\n    graphics: new PipeGraphicsComponent(this),\n    physics: new PhysicsComponent(this),\n    collisions: new RectCollisionComponent(this, { x: this.width, y: this.height })\n  };\n\n  // Really hacky. This augments the physics update to check the new position\n  // and trigger a callback when it first passes below 0 (i.e., the center of\n  // the play area). The cb in this instance ties back to a method of the\n  // ObstacleSystem object that created this pipe, which will be overridden by\n  // the main module to route through to the UISystem. Only the top pipe even\n  // gets this. YUCK. This begs for a refactor.\n  this.components.physics.update = function () {\n    PhysicsComponent.prototype.update.apply(this, arguments);\n    if (passCb && this.position.x <= 0) {\n      passCb();\n      passCb = null;\n    }\n  };\n\n  this.components.physics.position.x = startX + this.width / 2;\n  this.components.physics.position.y = attach === 'T' ? 1 - height / 2 : height / 2;\n  this.components.physics.velocity.x = -0.25;\n};\n\nmodule.exports = Pipe;\n\n},{\"../components/collisions/rectangle\":2,\"../components/graphics/pipe\":5,\"../components/physics/physics\":6}],10:[function(require,module,exports){\n'use strict';\n\nvar GraphicsSystem = require('./systems/graphics'),\n    PhysicsSystem = require('./systems/physics'),\n    InputSystem = require('./systems/input'),\n    ObstacleSystem = require('./systems/obstacles'),\n    UISystem = require('./systems/ui'),\n    Burd = require('./entities/burd');\n\nvar FlappityBurd = function FlappityBurd(canvas) {\n  var _this = this;\n\n  this.burd = new Burd();\n  this.entities = [this.burd];\n\n  this.graphics = new GraphicsSystem(this.entities, canvas);\n  this.physics = new PhysicsSystem(this.entities);\n  this.input = new InputSystem(this.entities, canvas);\n  this.obstacles = new ObstacleSystem(this.entities, canvas);\n  this.ui = new UISystem();\n\n  this.obstacles.onPassObstacle = function () {\n    _this.ui.bumpScore();\n  };\n\n  this.burd.components.collisions.onCollision = function () {\n    _this.physics.pause();\n    _this.obstacles.pause();\n    _this.input.started = false;\n    _this.ui.reset();\n  };\n};\n\nFlappityBurd.prototype.run = function () {\n  var _this2 = this;\n\n  this.graphics.run();\n  this.input.run();\n  this.input.onStartGame = function () {\n    if (!_this2.ui.isReady) {\n      return false;\n    }\n    _this2.burd.reset();\n    _this2.obstacles.run();\n    _this2.physics.run();\n    return true;\n  };\n};\n\nmodule.exports = FlappityBurd;\n\n},{\"./entities/burd\":8,\"./systems/graphics\":14,\"./systems/input\":15,\"./systems/obstacles\":16,\"./systems/physics\":17,\"./systems/ui\":18}],11:[function(require,module,exports){\n'use strict';\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; })();\n\nvar h = exports;\n\nh.clamp = function (value, low, high) {\n  if (value < low) {\n    return low;\n  }\n  if (value > high) {\n    return high;\n  }\n  return value;\n};\n\nh.subtract = function (a, b) {\n  return a - b;\n};\n\nh.scale = function (value, srcRange, dstRange) {\n  var _srcRange$sort = srcRange.sort(h.subtract);\n\n  var _srcRange$sort2 = _slicedToArray(_srcRange$sort, 2);\n\n  var srcMin = _srcRange$sort2[0];\n  var srcMax = _srcRange$sort2[1];\n\n  var _dstRange$sort = dstRange.sort(h.subtract);\n\n  var _dstRange$sort2 = _slicedToArray(_dstRange$sort, 2);\n\n  var dstMin = _dstRange$sort2[0];\n  var dstMax = _dstRange$sort2[1];\n  var srcSize = srcMax - srcMin;\n  var dstSize = dstMax - dstMin;\n\n  return (value - srcMin) / srcSize * dstSize + dstMin;\n};\n\n},{}],12:[function(require,module,exports){\n'use strict';\n\nvar FlappityBurd = require('./flappity-burd');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var canvas = document.getElementById('main-canvas'),\n      app = new FlappityBurd(canvas);\n  app.run();\n});\n\n},{\"./flappity-burd\":10}],13:[function(require,module,exports){\n'use strict';\n\nvar CollisionSystem = function CollisionSystem(entities) {\n  this.entities = entities;\n};\n\nCollisionSystem.prototype.tick = function () {\n  for (var i = 0; i < this.entities.length; i++) {\n    var entityA = this.entities[i];\n    if (!('collisions' in entityA.components)) {\n      continue;\n    }\n\n    for (var j = i + 1; j < this.entities.length; j++) {\n      var entityB = this.entities[j];\n      if (!('collisions' in entityB.components)) {\n        continue;\n      }\n\n      if (!entityA.components.collisions.collidesWith(entityB)) {\n        continue;\n      }\n\n      if (entityA.components.collisions.onCollision) {\n        entityA.components.collisions.onCollision(entityB);\n      }\n\n      if (entityB.components.collisions.onCollision) {\n        entityB.components.collisions.onCollision(entityA);\n      }\n    }\n  }\n};\n\nmodule.exports = CollisionSystem;\n\n},{}],14:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar GraphicsSystem = function GraphicsSystem(entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n  this.context = canvas.getContext('2d');\n};\n\nGraphicsSystem.prototype.run = function () {\n  var tick = this.tick.bind(this);\n  (function recur() {\n    global.requestAnimationFrame(function (t) {\n      tick(t, recur);\n    });\n  })();\n};\n\nGraphicsSystem.prototype.tick = function (t, cb) {\n  var _this = this;\n\n  // Blank slate.\n  if (this.canvas.width !== this.canvas.offsetWith || this.canvas.height !== this.canvas.offsetHeight) {\n    this.canvas.width = this.canvas.offsetWidth;\n    this.canvas.height = this.canvas.offsetHeight;\n  }\n  this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  this.context.save();\n  this.context.translate(this.canvas.width / 2, this.canvas.height);\n  this.context.scale(this.canvas.height, -this.canvas.height);\n\n  // Render.\n  this.entities.forEach(function (entity) {\n    if (!entity.components || !entity.components.graphics) {\n      return;\n    }\n    entity.components.graphics.draw(_this.context);\n  });\n\n  this.context.restore();\n\n  cb && cb();\n};\n\nmodule.exports = GraphicsSystem;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],15:[function(require,module,exports){\n'use strict';\n\nvar InputSystem = function InputSystem(entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n  this.started = false;\n};\n\nInputSystem.prototype.run = function () {\n  this.canvas.addEventListener('mousedown', this.onClick.bind(this));\n  this.canvas.addEventListener('touchstart', this.onTouchStart.bind(this));\n  this.canvas.addEventListener('touchend', this.onTouchEnd.bind(this));\n  this.canvas.addEventListener('touchmove', this.onTouchMove.bind(this));\n  this.canvas.addEventListener('touchcancel', this.onTouchCancel.bind(this));\n};\n\nInputSystem.prototype.onClick = function (evt) {\n  evt.preventDefault();\n  if (!this.started && this.onStartGame()) {\n    this.started = true;\n  }\n  var burd = this.entities[0];\n  burd.components.physics.velocity.y = 0.55;\n};\n\nInputSystem.prototype.onTouchStart = function (evt) {\n  evt.preventDefault();\n  this.touching || this.onClick();\n  this.touching = true;\n};\n\nInputSystem.prototype.onTouchEnd = function (evt) {\n  evt.preventDefault();\n  this.touching = false;\n};\n\nInputSystem.prototype.onTouchMove = function (evt) {\n  evt.preventDefault();\n};\n\nInputSystem.prototype.onTouchCancel = function (evt) {\n  evt.preventDefault();\n  this.touching = false;\n};\n\nmodule.exports = InputSystem;\n\n},{}],16:[function(require,module,exports){\n'use strict';\n\nvar Pipe = require('../entities/pipe'),\n    AltitudeLimit = require('../entities/altitude-limit'),\n    scale = require('../helpers').scale;\n\nvar ObstacleSystem = function ObstacleSystem(entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n  this.ground = new AltitudeLimit(this.canvas.width, 0);\n  this.ceiling = new AltitudeLimit(this.canvas.width, 1);\n  this.entities.push(this.ground, this.ceiling);\n  this.intvl = null;\n};\n\nObstacleSystem.prototype.run = function () {\n  // clear existing pipes\n  for (var i = this.entities.length - 1; i >= 0; i--) {\n    if (this.entities[i] instanceof Pipe) {\n      this.entities.splice(i, 1);\n    }\n  }\n  this.intvl = window.setInterval(this.tick.bind(this), 1000 * 2);\n};\n\nObstacleSystem.prototype.pause = function () {\n  this.intvl && window.clearInterval(this.intvl);\n  this.intvl = null;\n};\n\nObstacleSystem.prototype.tick = function () {\n  var _this = this;\n\n  var aspectRatio = this.canvas.width / 2 / this.canvas.height,\n      height = scale(Math.random(), [0, 1], [0.2, 0.8]),\n      gap = 0.2,\n      height1 = height - gap / 2,\n      height2 = 1 - height1 - gap,\n      pass = this.onPassObstacle.bind(this);\n\n  this.ground.width = this.canvas.width; // Update the ground if the canvas size changes.\n\n  this.entities.push(new Pipe(aspectRatio, height1, 'T', pass));\n  this.entities.push(new Pipe(aspectRatio, height2, 'B'));\n  this.entities.forEach(function (ent, i) {\n    if (ent.components.physics.position.x < -aspectRatio - ent.width / 2) {\n      _this.entities.splice(i, 1);\n    }\n  });\n};\n\nmodule.exports = ObstacleSystem;\n\n},{\"../entities/altitude-limit\":7,\"../entities/pipe\":9,\"../helpers\":11}],17:[function(require,module,exports){\n'use strict';\n\nvar CollisionSystem = require('./collisions');\n\nvar PhysicsSystem = function PhysicsSystem(entities) {\n  this.entities = entities;\n  this.collisions = new CollisionSystem(entities);\n  this.intvl = null;\n};\n\nPhysicsSystem.prototype.run = function () {\n  this.intvl = window.setInterval(this.tick.bind(this), 1000 / 60);\n};\n\nPhysicsSystem.prototype.pause = function () {\n  this.intvl && window.clearInterval(this.intvl);\n  this.intvl = null;\n};\n\nPhysicsSystem.prototype.tick = function () {\n  this.entities.forEach(function (entity) {\n    if (!entity.components || !entity.components.physics) {\n      return;\n    }\n    entity.components.physics.update(1 / 60);\n  });\n  this.collisions.tick();\n};\n\nmodule.exports = PhysicsSystem;\n\n},{\"./collisions\":13}],18:[function(require,module,exports){\n'use strict';\n\nvar UISystem = function UISystem() {\n  var _this = this;\n\n  this.splash = document.getElementById('burd-splash');\n  this.score = document.getElementById('burd-score');\n  this.splash.onclick = function () {\n    _this.ready();\n  };\n  this.reset();\n};\n\nUISystem.prototype.ready = function () {\n  this.splash.style.display = 'none';\n  this.score.style.display = 'block';\n  this.isReady = true;\n};\n\nUISystem.prototype.reset = function () {\n  this.splash.style.display = 'block';\n  this.score.style.display = 'none';\n  this.score.textContent = '0';\n  this.isReady = false;\n};\n\nUISystem.prototype.bumpScore = function () {\n  this.score.textContent = (parseInt(this.score.textContent) + 1).toString();\n};\n\nmodule.exports = UISystem;\n\n},{}]},{},[12])\n\n","'use strict';\n\nvar RectCollisionComponent = function (entity, size) {\n  this.entity = entity;\n  this.size = size;\n  this.type = 'rect';\n};\n\nRectCollisionComponent.prototype.collidesWith = function (entity) {\n  if (entity.components.collisions.type === 'circle') {\n    return this.collideCircle(entity);\n  }\n  else if (entity.components.collisions.type === 'rect') {\n    return this.collideRect(entity);\n  }\n  return false;\n};\n\nRectCollisionComponent.prototype.collideCircle = function (entity) {\n  return entity.components.collisions.collideRect(this.entity);\n};\n\nRectCollisionComponent.prototype.collideRect = function (entity) {\n  var positionA = this.entity.components.physics.position,\n      positionB = entity.components.physics.position;\n\n  var sizeA = this.size,\n      sizeB = entity.components.collisions.size;\n\n  var leftA = positionA.x - sizeA.x / 2;\n  var rightA = positionA.x + sizeA.x / 2;\n  var bottomA = positionA.y - sizeA.y / 2;\n  var topA = positionA.y + sizeA.y / 2;\n\n  var leftB = positionB.x - sizeB.x / 2;\n  var rightB = positionB.x + sizeB.x / 2;\n  var bottomB = positionB.y - sizeB.y / 2;\n  var topB = positionB.y + sizeB.y / 2;\n\n  return !(leftA > rightB || leftB > rightA ||\n           bottomA > topB || bottomB > topA);\n};\n\nmodule.exports = RectCollisionComponent;\n","'use strict';\n\nvar AltLimitGraphicsComponent = function (entity) {\n  this.entity = entity;\n};\n\nAltLimitGraphicsComponent.prototype.draw = function (context) {\n  var position = this.entity.components.physics.position,\n      width = this.entity.width,\n      height = this.entity.height;\n\n  context.save();\n  context.translate(position.x - (width / 2), 0);\n  context.fillStyle = 'brown';\n  context.fillRect(0, 0, width, height);\n  context.restore();\n};\n\nmodule.exports = AltLimitGraphicsComponent;\n","'use strict';\n\nvar BurdGraphicsComponent = function (entity) {\n  this.entity = entity;\n};\n\nBurdGraphicsComponent.prototype.draw = function (context) {\n  var position = this.entity.components.physics.position;\n\n  context.save();\n  context.translate(position.x, position.y);\n  context.beginPath();\n  context.arc(0, 0, this.entity.radius, 0, 2 * Math.PI);\n  context.fill();\n  context.closePath();\n  context.restore();\n};\n\nmodule.exports = BurdGraphicsComponent;\n","'use strict';\n\nvar PipeGraphicsComponent = function (entity) {\n  this.entity = entity;\n};\n\nPipeGraphicsComponent.prototype.draw = function (context) {\n  var position = this.entity.components.physics.position,\n      width = this.entity.width,\n      height = this.entity.height,\n      attachT = this.entity.attach === 'T';\n\n  context.save();\n  context.translate(position.x - (width / 2), attachT ? 1 - height : 0);\n  context.fillStyle = 'green';\n  context.fillRect(0, 0, width, height);\n  context.restore();\n};\n\nmodule.exports = PipeGraphicsComponent;\n","'use strict';\n\nvar PhysicsComponent = function (entity) {\n  this.entity = entity;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n  this.velocity = {\n    x: 0,\n    y: 0\n  };\n  this.acceleration = {\n    x: 0,\n    y: 0\n  };\n};\n\nPhysicsComponent.prototype.update = function (delta) {\n  this.velocity.x += this.acceleration.x * delta;\n  this.velocity.y += this.acceleration.y * delta;\n\n  this.position.x += this.velocity.x * delta;\n  this.position.y += this.velocity.y * delta;\n};\n\nmodule.exports = PhysicsComponent;\n","'use strict';\n\nvar AltLimitGraphicsComponent = require('../components/graphics/altitude-limit'),\n    PhysicsComponent = require('../components/physics/physics'),\n    RectCollisionComponent = require('../components/collisions/rectangle');\n\nvar Ground = function (width, yPosition) {\n  this.height = 0.02;\n  this.width = width;\n\n  this.components = {\n    graphics: new AltLimitGraphicsComponent(this),\n    physics: new PhysicsComponent(this),\n    collisions: new RectCollisionComponent(this, {x: this.width, y: this.height})\n  };\n\n  this.components.physics.position.x = 0;\n  this.components.physics.position.y = (this.height / 2) + yPosition;\n};\n\nmodule.exports = Ground;\n","'use strict';\n\nvar BurdGraphicsComponent = require('../components/graphics/burd'),\n    PhysicsComponent = require('../components/physics/physics'),\n    CircleCollisionComponent = require('../components/collisions/circle');\n\nvar Burd = function () {\n  this.radius = 0.03;\n\n  this.components = {\n    graphics: new BurdGraphicsComponent(this),\n    collisions: new CircleCollisionComponent(this, this.radius)\n  };\n\n  this.reset();\n};\n\nBurd.prototype.reset = function () {\n  this.components.physics = new PhysicsComponent();\n  this.components.physics.position.y = 0.5;\n  this.components.physics.acceleration.y = -1.5;\n};\n\nmodule.exports = Burd;\n","'use strict';\n\nvar PipeGraphicsComponent = require('../components/graphics/pipe'),\n    PhysicsComponent = require('../components/physics/physics'),\n    RectCollisionComponent = require('../components/collisions/rectangle');\n\nvar Pipe = function (startX, height, attach, passCb) {\n  this.attach = attach;\n  this.height = height;\n  this.width = 0.12;\n\n  this.components = {\n    graphics: new PipeGraphicsComponent(this),\n    physics: new PhysicsComponent(this),\n    collisions: new RectCollisionComponent(this, {x: this.width, y: this.height})\n  };\n\n  // Really hacky. This augments the physics update to check the new position\n  // and trigger a callback when it first passes below 0 (i.e., the center of\n  // the play area). The cb in this instance ties back to a method of the\n  // ObstacleSystem object that created this pipe, which will be overridden by\n  // the main module to route through to the UISystem. Only the top pipe even\n  // gets this. YUCK. This begs for a refactor.\n  this.components.physics.update = function () {\n    PhysicsComponent.prototype.update.apply(this, arguments);\n    if (passCb && this.position.x <= 0) {\n      passCb();\n      passCb = null;\n    }\n  };\n\n  this.components.physics.position.x = startX + (this.width / 2);\n  this.components.physics.position.y = attach === 'T' ?\n    1 - (height / 2) :\n    height / 2;\n  this.components.physics.velocity.x = -0.25;\n};\n\nmodule.exports = Pipe;\n","'use strict';\n\nvar GraphicsSystem = require('./systems/graphics'),\n    PhysicsSystem = require('./systems/physics'),\n    InputSystem = require('./systems/input'),\n    ObstacleSystem = require('./systems/obstacles'),\n    UISystem = require('./systems/ui'),\n    Burd = require('./entities/burd');\n\nvar FlappityBurd = function(canvas) {\n  this.burd = new Burd();\n  this.entities = [this.burd];\n\n  this.graphics = new GraphicsSystem(this.entities, canvas);\n  this.physics = new PhysicsSystem(this.entities);\n  this.input = new InputSystem(this.entities, canvas);\n  this.obstacles = new ObstacleSystem(this.entities, canvas);\n  this.ui = new UISystem();\n\n  this.obstacles.onPassObstacle = () => {\n    this.ui.bumpScore();\n  };\n\n  this.burd.components.collisions.onCollision = () => {\n    this.physics.pause();\n    this.obstacles.pause();\n    this.input.started = false;\n    this.ui.reset();\n  };\n};\n\nFlappityBurd.prototype.run = function () {\n  this.graphics.run();\n  this.input.run();\n  this.input.onStartGame = () => {\n    if (!this.ui.isReady) { return false; }\n    this.burd.reset();\n    this.obstacles.run();\n    this.physics.run();\n    return true;\n  };\n};\n\nmodule.exports = FlappityBurd;\n","'use strict';\n\nvar h = exports;\n\nh.clamp = function(value, low, high) {\n  if (value < low) {\n    return low;\n  }\n  if (value > high) {\n    return high;\n  }\n  return value;\n};\n\nh.subtract = function (a, b) { return a - b; };\n\nh.scale = function (value, srcRange, dstRange) {\n  var [srcMin, srcMax] = srcRange.sort(h.subtract),\n      [dstMin, dstMax] = dstRange.sort(h.subtract),\n      srcSize = srcMax - srcMin,\n      dstSize = dstMax - dstMin;\n\n  return ((value - srcMin) / srcSize * dstSize) + dstMin;\n};\n","'use strict';\n\nvar FlappityBurd = require('./flappity-burd');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var canvas = document.getElementById('main-canvas'),\n      app = new FlappityBurd(canvas);\n  app.run();\n});\n","'use strict';\n\nvar CollisionSystem = function(entities) {\n  this.entities = entities;\n};\n\nCollisionSystem.prototype.tick = function() {\n  for (var i = 0; i < this.entities.length; i++) {\n    var entityA = this.entities[i];\n    if (!('collisions' in entityA.components)) {\n      continue;\n    }\n\n    for (var j = i + 1; j < this.entities.length; j++) {\n      var entityB = this.entities[j];\n      if (!('collisions' in entityB.components)) {\n        continue;\n      }\n\n      if (!entityA.components.collisions.collidesWith(entityB)) {\n        continue;\n      }\n\n      if (entityA.components.collisions.onCollision) {\n        entityA.components.collisions.onCollision(entityB);\n      }\n\n      if (entityB.components.collisions.onCollision) {\n        entityB.components.collisions.onCollision(entityA);\n      }\n    }\n  }\n};\n\nmodule.exports = CollisionSystem;\n","'use strict';\n\nvar GraphicsSystem = function (entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n  this.context = canvas.getContext('2d');\n};\n\nGraphicsSystem.prototype.run = function () {\n  var tick = this.tick.bind(this);\n  (function recur() {\n    global.requestAnimationFrame((t) => {\n      tick(t, recur);\n    });\n  })();\n};\n\nGraphicsSystem.prototype.tick = function (t, cb) {\n  // Blank slate.\n  if (this.canvas.width !== this.canvas.offsetWith ||\n      this.canvas.height !== this.canvas.offsetHeight) {\n    this.canvas.width = this.canvas.offsetWidth;\n    this.canvas.height = this.canvas.offsetHeight;\n  }\n  this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  this.context.save();\n  this.context.translate(this.canvas.width / 2, this.canvas.height);\n  this.context.scale(this.canvas.height, -this.canvas.height);\n\n  // Render.\n  this.entities.forEach((entity) => {\n    if (!entity.components || !entity.components.graphics) { return; }\n    entity.components.graphics.draw(this.context);\n  });\n\n  this.context.restore();\n\n  cb && cb();\n};\n\nmodule.exports = GraphicsSystem;\n","'use strict';\n\nvar InputSystem = function (entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n  this.started = false;\n};\n\nInputSystem.prototype.run = function () {\n  this.canvas.addEventListener('mousedown', this.onClick.bind(this));\n  this.canvas.addEventListener('touchstart', this.onTouchStart.bind(this));\n  this.canvas.addEventListener('touchend', this.onTouchEnd.bind(this));\n  this.canvas.addEventListener('touchmove', this.onTouchMove.bind(this));\n  this.canvas.addEventListener('touchcancel', this.onTouchCancel.bind(this));\n};\n\nInputSystem.prototype.onClick = function (evt) {\n  evt.preventDefault();\n  if (!this.started && this.onStartGame()) {\n    this.started = true;\n  }\n  var burd = this.entities[0];\n  burd.components.physics.velocity.y = 0.55;\n};\n\nInputSystem.prototype.onTouchStart = function (evt) {\n  evt.preventDefault();\n  this.touching || this.onClick();\n  this.touching = true;\n};\n\nInputSystem.prototype.onTouchEnd = function (evt) {\n  evt.preventDefault();\n  this.touching = false;\n};\n\nInputSystem.prototype.onTouchMove = function (evt) {\n  evt.preventDefault();\n};\n\nInputSystem.prototype.onTouchCancel = function (evt) {\n  evt.preventDefault();\n  this.touching = false;\n};\n\nmodule.exports = InputSystem;\n","'use strict';\n\nvar Pipe = require('../entities/pipe'),\n    AltitudeLimit = require('../entities/altitude-limit'),\n    scale = require('../helpers').scale;\n\nvar ObstacleSystem = function (entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n  this.ground = new AltitudeLimit(this.canvas.width, 0);\n  this.ceiling = new AltitudeLimit(this.canvas.width, 1);\n  this.entities.push(this.ground, this.ceiling);\n  this.intvl = null;\n};\n\nObstacleSystem.prototype.run = function () {\n  // clear existing pipes\n  for (var i = this.entities.length - 1; i >= 0; i--) {\n    if (this.entities[i] instanceof Pipe) { this.entities.splice(i, 1); }\n  }\n  this.intvl = window.setInterval(this.tick.bind(this), 1000 * 2);\n};\n\nObstacleSystem.prototype.pause = function () {\n  this.intvl && window.clearInterval(this.intvl);\n  this.intvl = null;\n};\n\nObstacleSystem.prototype.tick = function () {\n  var aspectRatio = this.canvas.width / 2 / this.canvas.height,\n      height = scale(Math.random(), [0, 1], [0.2, 0.8]),\n      gap = 0.2,\n      height1 = height - gap / 2,\n      height2 = 1 - height1 - gap,\n\n      pass = this.onPassObstacle.bind(this);\n\n  this.ground.width = this.canvas.width; // Update the ground if the canvas size changes.\n\n  this.entities.push(new Pipe(aspectRatio, height1, 'T', pass));\n  this.entities.push(new Pipe(aspectRatio, height2, 'B'));\n  this.entities.forEach((ent, i) => {\n    if (ent.components.physics.position.x < -aspectRatio - (ent.width / 2)) {\n      this.entities.splice(i, 1);\n    }\n  });\n};\n\nmodule.exports = ObstacleSystem;\n","'use strict';\n\nvar CollisionSystem = require('./collisions');\n\nvar PhysicsSystem = function (entities) {\n  this.entities = entities;\n  this.collisions = new CollisionSystem(entities);\n  this.intvl = null;\n};\n\nPhysicsSystem.prototype.run = function () {\n  this.intvl = window.setInterval(this.tick.bind(this), 1000 / 60);\n};\n\nPhysicsSystem.prototype.pause = function () {\n  this.intvl && window.clearInterval(this.intvl);\n  this.intvl = null;\n};\n\nPhysicsSystem.prototype.tick = function () {\n  this.entities.forEach((entity) => {\n    if (!entity.components || !entity.components.physics) { return; }\n    entity.components.physics.update(1/60);\n  });\n  this.collisions.tick();\n};\n\nmodule.exports = PhysicsSystem;\n","'use strict';\n\nvar UISystem = function () {\n  this.splash = document.getElementById('burd-splash');\n  this.score = document.getElementById('burd-score');\n  this.splash.onclick = () => {\n    this.ready();\n  };\n  this.reset();\n};\n\nUISystem.prototype.ready = function () {\n  this.splash.style.display = 'none';\n  this.score.style.display = 'block';\n  this.isReady = true;\n};\n\nUISystem.prototype.reset = function () {\n  this.splash.style.display = 'block';\n  this.score.style.display = 'none';\n  this.score.textContent = '0';\n  this.isReady = false;\n};\n\nUISystem.prototype.bumpScore = function () {\n  this.score.textContent = (parseInt(this.score.textContent) + 1).toString();\n};\n\nmodule.exports = UISystem;\n"],"sourceRoot":"/source/"}