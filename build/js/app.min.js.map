{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","site/js/components/graphics/burd.js","app.min.js","site/js/components/graphics/pipe.js","site/js/components/physics/physics.js","site/js/entities/burd.js","site/js/entities/pipe.js","site/js/flappity-burd.js","site/js/main.js","site/js/systems/graphics.js","site/js/systems/input.js","site/js/systems/obstacles.js","site/js/systems/physics.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","BurdGraphicsComponent","entity","this","prototype","draw","context","position","components","physics","save","translate","x","y","beginPath","arc","Math","PI","fill","closePath","restore",2,"PipeGraphicsComponent","width","height","gap","fillStyle","fillRect",3,"PhysicsComponent","velocity","acceleration","update","delta",4,"Burd","graphics","../components/graphics/burd","../components/physics/physics",5,"Pipe","startPosition","random","../components/graphics/pipe",6,"GraphicsSystem","PhysicsSystem","InputSystem","ObstacleSystem","FlappityBurd","canvas","entities","input","obstacles","run","./entities/burd","./systems/graphics","./systems/input","./systems/obstacles","./systems/physics",7,"document","addEventListener","getElementById","app","./flappity-burd",8,"global","getContext","tick","bind","recur","requestAnimationFrame","cb","_this","offsetWith","offsetHeight","offsetWidth","clearRect","scale","forEach","self","window",9,"onClick","onTouchStart","onTouchEnd","onTouchMove","onTouchCancel","burd","evt","preventDefault","touching",10,"setInterval","aspectRatio","push","ent","splice","../entities/pipe",11],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nvar BurdGraphicsComponent = function (entity) {\n  this.entity = entity;\n};\n\nBurdGraphicsComponent.prototype.draw = function (context) {\n  var position = this.entity.components.physics.position;\n\n  context.save();\n  context.translate(position.x, position.y);\n  context.beginPath();\n  context.arc(0, 0.5, 0.02, 0, 2 * Math.PI);\n  context.fill();\n  context.closePath();\n  context.restore();\n};\n\nmodule.exports = BurdGraphicsComponent;\n","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar BurdGraphicsComponent = function BurdGraphicsComponent(entity) {\n  this.entity = entity;\n};\n\nBurdGraphicsComponent.prototype.draw = function (context) {\n  var position = this.entity.components.physics.position;\n\n  context.save();\n  context.translate(position.x, position.y);\n  context.beginPath();\n  context.arc(0, 0.5, 0.02, 0, 2 * Math.PI);\n  context.fill();\n  context.closePath();\n  context.restore();\n};\n\nmodule.exports = BurdGraphicsComponent;\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\nvar PipeGraphicsComponent = function PipeGraphicsComponent(entity) {\n  this.entity = entity;\n};\n\nPipeGraphicsComponent.prototype.draw = function (context) {\n  var position = this.entity.components.physics.position,\n      width = this.entity.width,\n      height = this.entity.height,\n      gap = this.entity.gap;\n\n  context.save();\n  context.translate(position.x - width / 2, 0);\n  context.fillStyle = 'green';\n  context.fillRect(0, 0, width, height - gap / 2);\n  context.fillRect(0, height + gap / 2, width, 1);\n  context.restore();\n};\n\nmodule.exports = PipeGraphicsComponent;\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nvar PhysicsComponent = function PhysicsComponent(entity) {\n  this.entity = entity;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n  this.velocity = {\n    x: 0,\n    y: 0\n  };\n  this.acceleration = {\n    x: 0,\n    y: 0\n  };\n};\n\nPhysicsComponent.prototype.update = function (delta) {\n  this.velocity.x += this.acceleration.x * delta;\n  this.velocity.y += this.acceleration.y * delta;\n\n  this.position.x += this.velocity.x * delta;\n  this.position.y += this.velocity.y * delta;\n};\n\nmodule.exports = PhysicsComponent;\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nvar BurdGraphicsComponent = require('../components/graphics/burd'),\n    PhysicsComponent = require('../components/physics/physics');\n\nvar Burd = function Burd() {\n  this.components = {\n    graphics: new BurdGraphicsComponent(this),\n    physics: new PhysicsComponent(this)\n  };\n\n  this.components.physics.position.y = 0.5;\n  this.components.physics.acceleration.y = -2;\n};\n\nmodule.exports = Burd;\n\n},{\"../components/graphics/burd\":1,\"../components/physics/physics\":3}],5:[function(require,module,exports){\n'use strict';\n\nvar PipeGraphicsComponent = require('../components/graphics/pipe'),\n    PhysicsComponent = require('../components/physics/physics');\n\nvar Pipe = function Pipe(startPosition) {\n  this.components = {\n    graphics: new PipeGraphicsComponent(this),\n    physics: new PhysicsComponent(this)\n  };\n\n  this.height = Math.random();\n  this.width = 0.15;\n  this.gap = 0.15;\n\n  this.components.physics.position.x = startPosition + this.width / 2;\n  this.components.physics.velocity.x = -0.3;\n};\n\nmodule.exports = Pipe;\n\n},{\"../components/graphics/pipe\":2,\"../components/physics/physics\":3}],6:[function(require,module,exports){\n'use strict';\n\nvar GraphicsSystem = require('./systems/graphics'),\n    PhysicsSystem = require('./systems/physics'),\n    InputSystem = require('./systems/input'),\n    ObstacleSystem = require('./systems/obstacles'),\n    Burd = require('./entities/burd');\n\nvar FlappityBurd = function FlappityBurd(canvas) {\n  this.entities = [new Burd()];\n  this.graphics = new GraphicsSystem(this.entities, canvas);\n  this.physics = new PhysicsSystem(this.entities);\n  this.input = new InputSystem(this.entities, canvas);\n  this.obstacles = new ObstacleSystem(this.entities, canvas);\n};\n\nFlappityBurd.prototype.run = function () {\n  this.graphics.run();\n  this.physics.run();\n  this.input.run();\n  this.obstacles.run();\n};\n\nmodule.exports = FlappityBurd;\n\n},{\"./entities/burd\":4,\"./systems/graphics\":8,\"./systems/input\":9,\"./systems/obstacles\":10,\"./systems/physics\":11}],7:[function(require,module,exports){\n'use strict';\n\nvar FlappityBurd = require('./flappity-burd');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var canvas = document.getElementById('main-canvas'),\n      app = new FlappityBurd(canvas);\n  app.run();\n});\n\n},{\"./flappity-burd\":6}],8:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar GraphicsSystem = function GraphicsSystem(entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n  this.context = canvas.getContext('2d');\n};\n\nGraphicsSystem.prototype.run = function () {\n  var tick = this.tick.bind(this);\n  (function recur() {\n    global.requestAnimationFrame(function (t) {\n      tick(t, recur);\n    });\n  })();\n};\n\nGraphicsSystem.prototype.tick = function (t, cb) {\n  var _this = this;\n\n  // Blank slate.\n  if (this.canvas.width !== this.canvas.offsetWith || this.canvas.height !== this.canvas.offsetHeight) {\n    this.canvas.width = this.canvas.offsetWidth;\n    this.canvas.height = this.canvas.offsetHeight;\n  }\n  this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  this.context.save();\n  this.context.translate(this.canvas.width / 2, this.canvas.height);\n  this.context.scale(this.canvas.height, -this.canvas.height);\n\n  // Render.\n  this.entities.forEach(function (entity) {\n    if (!entity.components || !entity.components.graphics) {\n      return;\n    }\n    entity.components.graphics.draw(_this.context);\n  });\n\n  this.context.restore();\n\n  cb();\n};\n\nmodule.exports = GraphicsSystem;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],9:[function(require,module,exports){\n'use strict';\n\nvar InputSystem = function InputSystem(entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n};\n\nInputSystem.prototype.run = function () {\n  this.canvas.addEventListener('click', this.onClick.bind(this));\n  this.canvas.addEventListener('touchstart', this.onTouchStart.bind(this));\n  this.canvas.addEventListener('touchend', this.onTouchEnd.bind(this));\n  this.canvas.addEventListener('touchmove', this.onTouchMove.bind(this));\n  this.canvas.addEventListener('touchcancel', this.onTouchCancel.bind(this));\n};\n\nInputSystem.prototype.onClick = function () {\n  var burd = this.entities[0];\n  burd.components.physics.velocity.y = 0.5;\n};\n\nInputSystem.prototype.onTouchStart = function (evt) {\n  evt.preventDefault();\n  this.touching || this.onClick();\n  this.touching = true;\n};\n\nInputSystem.prototype.onTouchEnd = function (evt) {\n  evt.preventDefault();\n  this.touching = false;\n};\n\nInputSystem.prototype.onTouchMove = function (evt) {\n  evt.preventDefault();\n};\n\nInputSystem.prototype.onTouchCancel = function (evt) {\n  evt.preventDefault();\n  this.touching = false;\n};\n\nmodule.exports = InputSystem;\n\n},{}],10:[function(require,module,exports){\n'use strict';\n\nvar Pipe = require('../entities/pipe');\n\nvar ObstacleSystem = function ObstacleSystem(entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n};\n\nObstacleSystem.prototype.run = function () {\n  window.setInterval(this.tick.bind(this), 1000 * 2);\n};\n\nObstacleSystem.prototype.tick = function () {\n  var _this = this;\n\n  var aspectRatio = this.canvas.width / 2 / this.canvas.height;\n  this.entities.push(new Pipe(aspectRatio));\n  this.entities.forEach(function (ent, i) {\n    if (ent.components.physics.position.x < -aspectRatio) {\n      _this.entities.splice(i, 1);\n    }\n  });\n};\n\nmodule.exports = ObstacleSystem;\n\n},{\"../entities/pipe\":5}],11:[function(require,module,exports){\n'use strict';\n\nvar PhysicsSystem = function PhysicsSystem(entities) {\n  this.entities = entities;\n};\n\nPhysicsSystem.prototype.run = function () {\n  window.setInterval(this.tick.bind(this), 1000 / 60);\n};\n\nPhysicsSystem.prototype.tick = function () {\n  this.entities.forEach(function (entity) {\n    if (!entity.components || !entity.components.physics) {\n      return;\n    }\n    entity.components.physics.update(1 / 60);\n  });\n};\n\nmodule.exports = PhysicsSystem;\n\n},{}]},{},[7])\n\n","'use strict';\n\nvar PipeGraphicsComponent = function (entity) {\n  this.entity = entity;\n};\n\nPipeGraphicsComponent.prototype.draw = function (context) {\n  var position = this.entity.components.physics.position,\n      width = this.entity.width,\n      height = this.entity.height,\n      gap = this.entity.gap;\n\n  context.save();\n  context.translate(position.x - (width / 2), 0);\n  context.fillStyle = 'green';\n  context.fillRect(0, 0, width, height - (gap / 2));\n  context.fillRect(0, height + (gap / 2), width, 1);\n  context.restore();\n};\n\nmodule.exports = PipeGraphicsComponent;\n","'use strict';\n\nvar PhysicsComponent = function (entity) {\n  this.entity = entity;\n  this.position = {\n    x: 0,\n    y: 0\n  };\n  this.velocity = {\n    x: 0,\n    y: 0\n  };\n  this.acceleration = {\n    x: 0,\n    y: 0\n  };\n};\n\nPhysicsComponent.prototype.update = function (delta) {\n  this.velocity.x += this.acceleration.x * delta;\n  this.velocity.y += this.acceleration.y * delta;\n\n  this.position.x += this.velocity.x * delta;\n  this.position.y += this.velocity.y * delta;\n};\n\nmodule.exports = PhysicsComponent;\n","'use strict';\n\nvar BurdGraphicsComponent = require('../components/graphics/burd'),\n    PhysicsComponent = require('../components/physics/physics');\n\nvar Burd = function () {\n  this.components = {\n    graphics: new BurdGraphicsComponent(this),\n    physics: new PhysicsComponent(this)\n  };\n\n  this.components.physics.position.y = 0.5;\n  this.components.physics.acceleration.y = -2;\n};\n\nmodule.exports = Burd;\n","'use strict';\n\nvar PipeGraphicsComponent = require('../components/graphics/pipe'),\n    PhysicsComponent = require('../components/physics/physics');\n\nvar Pipe = function (startPosition) {\n  this.components = {\n    graphics: new PipeGraphicsComponent(this),\n    physics: new PhysicsComponent(this)\n  };\n\n  this.height = Math.random();\n  this.width = 0.15;\n  this.gap = 0.15;\n\n  this.components.physics.position.x = startPosition + (this.width / 2);\n  this.components.physics.velocity.x = -0.3;\n};\n\nmodule.exports = Pipe;\n","'use strict';\n\nvar GraphicsSystem = require('./systems/graphics'),\n    PhysicsSystem = require('./systems/physics'),\n    InputSystem = require('./systems/input'),\n    ObstacleSystem = require('./systems/obstacles'),\n    Burd = require('./entities/burd');\n\nvar FlappityBurd = function(canvas) {\n  this.entities = [new Burd()];\n  this.graphics = new GraphicsSystem(this.entities, canvas);\n  this.physics = new PhysicsSystem(this.entities);\n  this.input = new InputSystem(this.entities, canvas);\n  this.obstacles = new ObstacleSystem(this.entities, canvas);\n};\n\nFlappityBurd.prototype.run = function () {\n  this.graphics.run();\n  this.physics.run();\n  this.input.run();\n  this.obstacles.run();\n};\n\nmodule.exports = FlappityBurd;\n","'use strict';\n\nvar FlappityBurd = require('./flappity-burd');\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  var canvas = document.getElementById('main-canvas'),\n      app = new FlappityBurd(canvas);\n  app.run();\n});\n","'use strict';\n\nvar GraphicsSystem = function (entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n  this.context = canvas.getContext('2d');\n};\n\nGraphicsSystem.prototype.run = function () {\n  var tick = this.tick.bind(this);\n  (function recur() {\n    global.requestAnimationFrame((t) => {\n      tick(t, recur);\n    });\n  })();\n};\n\nGraphicsSystem.prototype.tick = function (t, cb) {\n  // Blank slate.\n  if (this.canvas.width !== this.canvas.offsetWith ||\n      this.canvas.height !== this.canvas.offsetHeight) {\n    this.canvas.width = this.canvas.offsetWidth;\n    this.canvas.height = this.canvas.offsetHeight;\n  }\n  this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n  this.context.save();\n  this.context.translate(this.canvas.width / 2, this.canvas.height);\n  this.context.scale(this.canvas.height, -this.canvas.height);\n\n  // Render.\n  this.entities.forEach((entity) => {\n    if (!entity.components || !entity.components.graphics) { return; }\n    entity.components.graphics.draw(this.context);\n  });\n\n  this.context.restore();\n\n  cb();\n};\n\nmodule.exports = GraphicsSystem;\n","'use strict';\n\nvar InputSystem = function (entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n};\n\nInputSystem.prototype.run = function () {\n  this.canvas.addEventListener('click', this.onClick.bind(this));\n  this.canvas.addEventListener('touchstart', this.onTouchStart.bind(this));\n  this.canvas.addEventListener('touchend', this.onTouchEnd.bind(this));\n  this.canvas.addEventListener('touchmove', this.onTouchMove.bind(this));\n  this.canvas.addEventListener('touchcancel', this.onTouchCancel.bind(this));\n};\n\nInputSystem.prototype.onClick = function () {\n  var burd = this.entities[0];\n  burd.components.physics.velocity.y = 0.5;\n};\n\nInputSystem.prototype.onTouchStart = function (evt) {\n  evt.preventDefault();\n  this.touching || this.onClick();\n  this.touching = true;\n};\n\nInputSystem.prototype.onTouchEnd = function (evt) {\n  evt.preventDefault();\n  this.touching = false;\n};\n\nInputSystem.prototype.onTouchMove = function (evt) {\n  evt.preventDefault();\n};\n\nInputSystem.prototype.onTouchCancel = function (evt) {\n  evt.preventDefault();\n  this.touching = false;\n};\n\nmodule.exports = InputSystem;\n","'use strict';\n\nvar Pipe = require('../entities/pipe');\n\nvar ObstacleSystem = function (entities, canvas) {\n  this.entities = entities;\n  this.canvas = canvas;\n};\n\nObstacleSystem.prototype.run = function () {\n  window.setInterval(this.tick.bind(this), 1000 * 2);\n};\n\nObstacleSystem.prototype.tick = function () {\n  var aspectRatio = this.canvas.width / 2 / this.canvas.height;\n  this.entities.push(new Pipe(aspectRatio));\n  this.entities.forEach((ent, i) => {\n    if (ent.components.physics.position.x < -aspectRatio) {\n      this.entities.splice(i, 1);\n    }\n  });\n};\n\nmodule.exports = ObstacleSystem;\n","'use strict';\n\nvar PhysicsSystem = function (entities) {\n  this.entities = entities;\n};\n\nPhysicsSystem.prototype.run = function () {\n  window.setInterval(this.tick.bind(this), 1000 / 60);\n};\n\nPhysicsSystem.prototype.tick = function () {\n  this.entities.forEach((entity) => {\n    if (!entity.components || !entity.components.physics) { return; }\n    entity.components.physics.update(1/60);\n  });\n};\n\nmodule.exports = PhysicsSystem;\n"],"sourceRoot":"/source/"}